--- server/server/home/metin2/Server/share/locale/uk/special_item_group.txt
+++ server/server/home/metin2/Server/share/locale/uk/special_item_group.txt
@@ -12418,3 +12418,32 @@
 	18	27987	1	5 -- Clam

 	19	71082	1	3 -- Metin Stone(H)

 }

+

+# --- Growth Pet System ---

+Group PetBookChest

+{

+	Vnum	55009

+	1	55010	1	1 --**Resistance (Warrior) Book

+	2	55011	1	1 --**Resistance (Sura) Book

+	3	55012	1	1 --**Resistance (Assassin) Book

+	4	55013	1	1 --**Resistance (Shaman) Book

+	5	55015	1	1 --**Berserker Book

+	6	55016	1	1 --**Anti-Magic Book

+	7	55017	1	1 --**Haste Book

+	8	55018	1	1 --**Drill Book

+	9	55019	1	1 --**Restoration Book

+	10	55020	1	1 --**Vampirism Book

+	11	55021	1	1 --**Spiritualism Book

+	12	55022	1	1 --**Bulwark Book

+	13	55023	1	1 --**Reflection Book

+	14	55024	1	1 --**Yang Drop Book

+	15	55025	1	1 --**Range Book

+	16	55026	1	1 --**Immortal Book

+	17	55027	1	1 --**Panacea Book

+	18	55034	1	1 --**Master Brewer Book

+	19	55035	1	1 --**Monster Hunter Book

+	20	55036	1	1 --**Eagle Eyes Book

+	21	55037	1	1 --**Life Drain Book

+	22	55038	1	1 --**Light as a Feather Book

+	--23	55014	1	1 --**Resistance (Lycan)

+}


--- server/server/home/metin2/Source/Server/common/length.h
+++ server/server/home/metin2/Source/Server/common/length.h
@@ -365,53 +365,7 @@
 //

 

 #ifdef __GROWTH_PET_SYSTEM__

-enum EGrowthPet

-{

-	PET_MAX_LEVEL = 120,

-

-	PET_ATTR_CHANGE_ITEMVNUM = 55033,

-	PET_NAME_MAX_SIZE = 20,

-	PET_NAME_MIN_SIZE = 4,

-	PET_HATCHING_MONEY = 100000,

-	PET_SKILL_COUNT_MAX = 3,

-	PET_GROWTH_SKILL_LEVEL_MAX = 20,

-	PET_SKILL_UPGRADE_PRICE = 2000000,

-	PET_GROWTH_SKILL_OPEN_EVOL_LEVEL = 4,

-	PET_FEED_SLOT_MAX = 9,

-	PET_REVIVE_MATERIAL_SLOT_MAX = 10,

-

-	EGG_TO_UPBRINGING_DELTA = 300,

-	MELEY_PET_EGG_VNUM = 55406,

-

-	EXP_TYPE_MOB = 1,

-	EXP_TYPE_ITEM = 2,

-

-	PET_EVOL_MAX_ITEM_COUNT = 7,

-	PET_LAST_EVOL_MIN_DAY_COUNT = 30,

-

-	PET_MONKEY = 55701,

-	PET_SPIDER = 55702,

-	PET_RAZADOR = 55703,

-	PET_NEMERE = 55704,

-	PET_BLUE_DRAGON = 55705,

-	PET_RED_DRAGON = 55706,

-	PET_AZRAEL = 55707,

-	PET_MINI_EXECUTOR = 55708,

-	PET_BASHIIDO = 55709,

-	PET_NESSIE = 55710,

-	PET_EXEDYAR = 55711,

-	PET_MAX_NUM = 11,

-

-	PET_MAX_BONUS_NUM = 8,

-};

-

-enum EPetState

-{

-	STATE_NONE,

-	STATE_UPBRINGING,

-	STATE_BAG,

-	STATE_SAFEBOX,

-};

+	SE_GYEONGGONG_BOOM,

 #endif

 

 enum ESlotType


--- server/server/home/metin2/Source/Server/common/tables.h
+++ server/server/home/metin2/Source/Server/common/tables.h
@@ -233,8 +233,8 @@
 	//HEADER_GD_EMPTY = 162,

 

 #ifdef __GROWTH_PET_SYSTEM__

-	HEADER_GD_GROWTH_PET_SAVE = 163,

-	HEADER_GD_GROWTH_PET_DELETE = 164,

+	HEADER_GD_GROWTH_PET_SAVE		= 147,

+	HEADER_GD_GROWTH_PET_DELETE		= 148,

 #endif

 

 #if defined(__EXPRESSING_EMOTIONS__)

@@ -571,7 +571,7 @@
 	//HEADER_DG_EMPTY = 194,

 

 #ifdef __GROWTH_PET_SYSTEM__

-	HEADER_DG_GROWTH_PET_LOAD = 195,

+	HEADER_DG_GROWTH_PET_LOAD		= 187,

 #endif

 

 #if defined(__GEM_SHOP__)


--- server/server/home/metin2/Source/Server/db/src/Cache.cpp
+++ server/server/home/metin2/Source/Server/db/src/Cache.cpp
@@ -573,6 +573,9 @@
 	}

 	else

 	{

+		char name_esc[sizeof(m_data.szName) * 2 + 1];

+		CDBManager::instance().EscapeString(name_esc, m_data.szName, strlen(m_data.szName));

+

 		size_t queryLen;

 		queryLen = snprintf(szQuery, sizeof(szQuery),

 			"REPLACE INTO growth_pet%s SET "

@@ -604,7 +607,7 @@
 			m_data.dwOwner,

 			m_data.dwVnum,

 			m_data.bState,

-			m_data.szName,

+			name_esc,

 			m_data.bSize,

 			m_data.dwLevel,

 			m_data.bLevelStep,

@@ -633,4 +636,4 @@
 		m_bNeedQuery = false;

 	}

 }

-#endif

+#endif

--- server/server/home/metin2/Source/Server/db/src/ClientManager.cpp
+++ server/server/home/metin2/Source/Server/db/src/ClientManager.cpp
@@ -1087,28 +1087,13 @@
 		pi->pSafebox->wItemCount = static_cast<WORD>(s_items.size());

 

 #ifdef __GROWTH_PET_SYSTEM__

-		static std::vector<TGrowthPet> s_petVec;

-

-		// Loads pets only when opening safebox with items

-		if (pi->ip[0] == 0 && !s_items.empty())

-		{

-			char szQuery[QUERY_MAX_LEN];

-			snprintf(szQuery, sizeof(szQuery),

-				"SELECT id,vnum,state+0,name,size,level,level_step,evolution,type,hp,sp,def,hp_apply,sp_apply,def_apply,"

-				"age_apply,skill_level,exp,item_exp,UNIX_TIMESTAMP(birthday),end_time,max_time "

-				"FROM growth_pet%s WHERE owner_id=%d AND state=%d",

-				GetTablePostfix(), pi->account_id, STATE_SAFEBOX);

-

-			std::unique_ptr<SQLMsg> pkMsg(CDBManager::instance().DirectQuery(szQuery));

-			MYSQL_RES* pRes = pkMsg->Get()->pSQLResult;

-			CreateGrowthPetTableFromRes(pRes, &s_petVec, pi->account_id);

-		}

+			UpdateGrowthPetCacheSet(c->Get()->id);

 #endif

 

 		if (pi->ip[0] == 0)

 			pkPeer->EncodeHeader(HEADER_DG_SAFEBOX_LOAD, dwHandle, sizeof(TSafeboxTable) + sizeof(TPlayerItem) * s_items.size()

 #ifdef __GROWTH_PET_SYSTEM__

-			+ sizeof(WORD) + sizeof(TGrowthPet) * s_petVec.size()

+	FlushGrowthPetCacheSet(dwPID);

 #endif

 		);

 		else

@@ -1122,10 +1107,7 @@
 			pkPeer->Encode(&s_items[0], sizeof(TPlayerItem) * s_items.size());

 

 #ifdef __GROWTH_PET_SYSTEM__

-		pkPeer->EncodeWORD((WORD)s_petVec.size());

-

-		if (!s_petVec.empty())

-			pkPeer->Encode(&s_petVec[0], sizeof(TGrowthPet) * s_petVec.size());

+			+ sizeof(WORD) + sizeof(TGrowthPetSkillTable) * m_vec_growthPetSkillTable.size()

 #endif

 

 		delete pi;

@@ -1923,7 +1905,9 @@
 			// Item Cacheµµ ¾÷µ¥ÀÌÆ®

 			UpdateItemCacheSet(c->Get()->id);

 #ifdef __GROWTH_PET_SYSTEM__

-			UpdateGrowthPetCacheSet(c->Get()->id);

+		tmp->EncodeWORD(m_vec_growthPetSkillTable.size());

+		if (m_vec_growthPetSkillTable.size())

+			tmp->Encode(&m_vec_growthPetSkillTable[0], sizeof(TGrowthPetSkillTable) * m_vec_growthPetSkillTable.size());

 #endif

 		}

 		else if (c->CheckFlushTimeout())

@@ -2017,7 +2001,13 @@
 	pkCache->Flush();

 	FlushItemCacheSet(dwPID);

 #ifdef __GROWTH_PET_SYSTEM__

-	FlushGrowthPetCacheSet(dwPID);

+		case HEADER_GD_GROWTH_PET_SAVE:

+			QUERY_GROWTH_PET_SAVE(peer, data);

+			break;

+

+		case HEADER_GD_GROWTH_PET_DELETE:

+			QUERY_GROWTH_PET_DELETE(peer, data);

+			break;

 #endif

 	m_map_playerCache.erase(dwPID);

 	delete pkCache;

@@ -2045,7 +2035,7 @@
 			sizeof(WORD) + sizeof(TMobTable) * m_vec_mobTable.size() +

 			sizeof(WORD) + sizeof(TRefineTable) * m_iRefineTableSize

 #ifdef __GROWTH_PET_SYSTEM__

-			+ sizeof(WORD) + sizeof(TGrowthPetSkillTable) * m_vec_growthPetSkillTable.size()

+	case QID_GROWTH_PET:

 #endif

 		);

 		tmp->EncodeWORD(static_cast<WORD>(m_vec_skillTable.size()));

@@ -2064,9 +2054,8 @@
 		tmp->Encode(m_pRefineTable, sizeof(TRefineTable) * m_iRefineTableSize);

 

 #ifdef __GROWTH_PET_SYSTEM__

-		tmp->EncodeWORD(m_vec_growthPetSkillTable.size());

-		if (m_vec_growthPetSkillTable.size())

-			tmp->Encode(&m_vec_growthPetSkillTable[0], sizeof(TGrowthPetSkillTable) * m_vec_growthPetSkillTable.size());

+	case QID_GROWTH_PET_SAVE:

+	case QID_GROWTH_PET_DELETE:

 #endif

 	}

 }

@@ -3030,13 +3019,7 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-			case HEADER_GD_GROWTH_PET_SAVE:

-				QUERY_GROWTH_PET_SAVE(peer, data);

-				break;

-

-			case HEADER_GD_GROWTH_PET_DELETE:

-				QUERY_GROWTH_PET_DELETE(peer, data);

-				break;

+			UpdateGrowthPetCache();

 #endif

 

 #ifdef __OFFLINE_SHOP__

@@ -3188,7 +3171,282 @@
 		case QID_EXT_BATTLE_PASS:

 #endif

 #ifdef __GROWTH_PET_SYSTEM__

-		case QID_GROWTH_PET:

+CClientManager::TGrowthPetCacheSet* CClientManager::GetGrowthPetCacheSet(DWORD pid)

+{

+	auto it = m_map_pkGrowthPetCacheSetPtr.find(pid);

+

+	if (it == m_map_pkGrowthPetCacheSetPtr.end())

+		return nullptr;

+

+	return it->second;

+}

+

+void CClientManager::CreateGrowthPetCacheSet(DWORD pid)

+{

+	if (m_map_pkGrowthPetCacheSetPtr.find(pid) != m_map_pkGrowthPetCacheSetPtr.end())

+		return;

+

+	TGrowthPetCacheSet* pSet = new TGrowthPetCacheSet;

+	m_map_pkGrowthPetCacheSetPtr.insert(TGrowthPetCacheSetPtrMap::value_type(pid, pSet));

+

+	if (g_log)

+		sys_log(0, "GROWTH_PET_CACHE: new cache %u", pid);

+}

+

+void CClientManager::FlushGrowthPetCacheSet(DWORD pid)

+{

+	auto it = m_map_pkGrowthPetCacheSetPtr.find(pid);

+

+	if (it == m_map_pkGrowthPetCacheSetPtr.end())

+	{

+		sys_log(0, "FLUSH_GROWTH_PET_CACHESET : No GrowthPetCacheSet pid(%d)", pid);

+		return;

+	}

+

+	TGrowthPetCacheSet* pSet = it->second;

+	auto it_set = pSet->begin();

+

+	while (it_set != pSet->end())

+	{

+		CGrowthPetCache* c = *it_set++;

+		c->Flush();

+

+		m_map_growthPetCache.erase(c->Get()->dwID);

+		delete c;

+	}

+

+	pSet->clear();

+	delete pSet;

+

+	m_map_pkGrowthPetCacheSetPtr.erase(it);

+

+	if (g_log)

+		sys_log(0, "FLUSH_GROWTH_PET_CACHESET : Deleted pid(%d)", pid);

+}

+

+CGrowthPetCache* CClientManager::GetGrowthPetCache(DWORD id)

+{

+	auto it = m_map_growthPetCache.find(id);

+

+	if (it == m_map_growthPetCache.end())

+		return nullptr;

+

+	return it->second;

+}

+

+void CClientManager::PutGrowthPetCache(TGrowthPet* pNew, bool bSkipQuery)

+{

+	CGrowthPetCache* c;

+

+	c = GetGrowthPetCache(pNew->dwID);

+	if (!c)

+	{

+		if (g_log)

+			sys_log(0, "GROWTH_PET_CACHE: PutGrowthPetCache ==> New CGrowthPetCache id%d vnum%d new owner%d", pNew->dwID, pNew->dwVnum, pNew->dwOwner);

+

+		c = new CGrowthPetCache;

+		m_map_growthPetCache.insert(TGrowthPetCacheMap::value_type(pNew->dwID, c));

+	}

+	else

+	{

+		if (g_log)

+			sys_log(0, "GROWTH_PET_CACHE: PutGrowthPetCache ==> Have Cache");

+		if (pNew->dwOwner != c->Get()->dwOwner)

+		{

+			auto it = m_map_pkGrowthPetCacheSetPtr.find(c->Get()->dwOwner);

+

+			if (it != m_map_pkGrowthPetCacheSetPtr.end())

+			{

+				if (g_log)

+					sys_log(0, "GROWTH_PET_CACHE: delete owner %u id %u new owner %u", c->Get()->dwOwner, c->Get()->dwID, pNew->dwOwner);

+				it->second->erase(c);

+			}

+		}

+	}

+	c->Put(pNew, bSkipQuery);

+

+	auto it = m_map_pkGrowthPetCacheSetPtr.find(c->Get()->dwOwner);

+

+	if (it != m_map_pkGrowthPetCacheSetPtr.end())

+	{

+		if (g_log)

+			sys_log(0, "GROWTH_PET_CACHE: save %u id %u", c->Get()->dwOwner, c->Get()->dwID);

+		else

+			sys_log(1, "GROWTH_PET_CACHE: save %u id %u", c->Get()->dwOwner, c->Get()->dwID);

+		it->second->insert(c);

+	}

+	else

+	{

+		if (g_log)

+			sys_log(0, "GROWTH_PET_CACHE: direct save %u id %u", c->Get()->dwOwner, c->Get()->dwID);

+		else

+			sys_log(1, "GROWTH_PET_CACHE: direct save %u id %u", c->Get()->dwOwner, c->Get()->dwID);

+

+		c->OnFlush();

+	}

+}

+

+bool CClientManager::DeleteGrowthPetCache(DWORD dwID)

+{

+	CGrowthPetCache* c = GetGrowthPetCache(dwID);

+

+	if (!c)

+		return false;

+

+	c->Delete();

+	return true;

+}

+

+void CClientManager::UpdateGrowthPetCache()

+{

+	if (m_iCacheFlushCount >= m_iCacheFlushCountLimit)

+		return;

+

+	auto it = m_map_growthPetCache.begin();

+

+	while (it != m_map_growthPetCache.end())

+	{

+		CGrowthPetCache* c = (it++)->second;

+

+		if (c->CheckFlushTimeout())

+		{

+			if (g_test_server)

+				sys_log(0, "UpdateGrowthPetCache ==> Flush() vnum %d id owner %d", c->Get()->dwVnum, c->Get()->dwID, c->Get()->dwOwner);

+

+			c->Flush();

+

+			if (++m_iCacheFlushCount >= m_iCacheFlushCountLimit)

+				break;

+		}

+	}

+}

+

+void CClientManager::UpdateGrowthPetCacheSet(DWORD pid)

+{

+	auto it = m_map_pkGrowthPetCacheSetPtr.find(pid);

+

+	if (it == m_map_pkGrowthPetCacheSetPtr.end())

+	{

+		if (g_test_server)

+			sys_log(0, "UPDATE_GROWTH_PET_CACHESET : UpdateGrowthPetCacheSet ==> No GrowthPetCacheSet pid(%d)", pid);

+		return;

+	}

+

+	TGrowthPetCacheSet* pSet = it->second;

+	auto it_set = pSet->begin();

+

+	while (it_set != pSet->end())

+	{

+		CGrowthPetCache* c = *it_set++;

+		c->Flush();

+	}

+

+	if (g_log)

+		sys_log(0, "UPDATE_GROWTH_PET_CACHESET : UpdateGrowthPetCacheSet pid(%d)", pid);

+}

+

+void CClientManager::QUERY_GROWTH_PET_SAVE(CPeer* pkPeer, const char* c_pData)

+{

+	TGrowthPet* p = (TGrowthPet*)c_pData;

+	if (g_test_server)

+		sys_log(0, "QUERY_GROWTH_PET_SAVE => PutGrowthPetCache() owner %d id %d vnum %d ", p->dwOwner, p->dwID, p->dwVnum);

+

+	PutGrowthPetCache(p);

+}

+

+void CClientManager::QUERY_GROWTH_PET_DELETE(CPeer* pkPeer, const char* c_pData)

+{

+	DWORD dwID = *(DWORD*)c_pData;

+	c_pData += sizeof(DWORD);

+

+	DWORD dwPID = *(DWORD*)c_pData;

+

+	if (!DeleteGrowthPetCache(dwID))

+	{

+		char szQuery[64];

+		snprintf(szQuery, sizeof(szQuery), "DELETE FROM growth_pet%s WHERE id=%u", GetTablePostfix(), dwID);

+

+		if (dwPID == 0)

+			CDBManager::instance().AsyncQuery(szQuery);

+		else

+			CDBManager::instance().ReturnQuery(szQuery, QID_GROWTH_PET_DELETE, pkPeer->GetHandle(), NULL);

+	}

+}

+

+bool CClientManager::CreateGrowthPetTableFromRes(MYSQL_RES* res, std::vector<TGrowthPet>* pVec, DWORD dwPID)

+{

+	if (!res)

+	{

+		pVec->clear();

+		return true;

+	}

+

+	int rows;

+

+	if ((rows = mysql_num_rows(res)) <= 0)

+	{

+		pVec->clear();

+		return true;

+	}

+

+	pVec->resize(rows);

+

+	for (int i = 0; i < rows; ++i)

+	{

+		MYSQL_ROW row = mysql_fetch_row(res);

+		TGrowthPet& pet = pVec->at(i);

+

+		int cur = 0;

+

+		str_to_number(pet.dwID, row[cur++]);

+		str_to_number(pet.dwOwner, row[cur++]);

+		str_to_number(pet.dwVnum, row[cur++]);

+		str_to_number(pet.bState, row[cur++]);

+		strlcpy(pet.szName, row[cur++], sizeof(pet.szName));

+		str_to_number(pet.bSize, row[cur++]);

+		str_to_number(pet.dwLevel, row[cur++]);

+		str_to_number(pet.bLevelStep, row[cur++]);

+		str_to_number(pet.bEvolution, row[cur++]);

+		str_to_number(pet.bType, row[cur++]);

+		str_to_number(pet.dwHP, row[cur++]);

+		str_to_number(pet.dwSP, row[cur++]);

+		str_to_number(pet.dwDef, row[cur++]);

+		str_to_number(pet.dwHPApply, row[cur++]);

+		str_to_number(pet.dwSPApply, row[cur++]);

+		str_to_number(pet.dwDefApply, row[cur++]);

+		str_to_number(pet.dwAgeApply, row[cur++]);

+		thecore_memcpy(pet.aSkill, row[cur++], sizeof(pet.aSkill));

+		str_to_number(pet.lExp, row[cur++]);

+		str_to_number(pet.lItemExp, row[cur++]);

+		str_to_number(pet.lBirthday, row[cur++]);

+		str_to_number(pet.lEndTime, row[cur++]);

+		str_to_number(pet.lMaxTime, row[cur++]);

+	}

+

+	return true;

+}

+

+void CClientManager::RESULT_GROWTH_PET_LOAD(CPeer* peer, MYSQL_RES* pRes, DWORD dwHandle, DWORD dwPID)

+{

+	static std::vector<TGrowthPet> s_petVec;

+	CreateGrowthPetTableFromRes(pRes, &s_petVec, dwPID);

+	DWORD dwCount = s_petVec.size();

+

+	peer->EncodeHeader(HEADER_DG_GROWTH_PET_LOAD, dwHandle, sizeof(DWORD) + sizeof(TGrowthPet) * dwCount);

+	peer->EncodeDWORD(dwCount);

+

+	CreateGrowthPetCacheSet(dwPID);

+

+	sys_log(0, "GROWTH_PET_LOAD: count %u pid %u", dwCount, dwPID);

+

+	if (dwCount)

+	{

+		peer->Encode(&s_petVec[0], sizeof(TGrowthPet) * dwCount);

+

+		for (DWORD i = 0; i < dwCount; ++i)

+			PutGrowthPetCache(&s_petVec[i], true);

+	}

+}

 #endif

 			RESULT_COMPOSITE_PLAYER(peer, msg, qi->iType);

 			break;


--- server/server/home/metin2/Source/Server/db/src/ClientManager.h
+++ server/server/home/metin2/Source/Server/db/src/ClientManager.h
@@ -53,9 +53,9 @@
 	typedef std::unordered_map<short, BYTE> TChannelStatusMap;

 

 #ifdef __GROWTH_PET_SYSTEM__

-	typedef boost::unordered_map<DWORD, CGrowthPetCache*> TGrowthPetCacheMap;

-	typedef boost::unordered_set<CGrowthPetCache*, boost::hash<CGrowthPetCache*> > TGrowthPetCacheSet;

-	typedef boost::unordered_map<DWORD, TGrowthPetCacheSet*> TGrowthPetCacheSetPtrMap;

+	typedef std::unordered_map<DWORD, CGrowthPetCache*> TGrowthPetCacheMap;

+	typedef std::unordered_set<CGrowthPetCache*, std::hash<CGrowthPetCache*> > TGrowthPetCacheSet;

+	typedef std::unordered_map<DWORD, TGrowthPetCacheSet*> TGrowthPetCacheSetPtrMap;

 #endif

 

 	// MYSHOP_PRICE_LIST

@@ -437,8 +437,7 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-protected:

-	bool InitializeGrowthPetSkillTable();

+	bool		InitializeGrowthPetSkillTable();

 #endif

 

 private:

@@ -495,8 +494,6 @@
 	std::map<DWORD, building::TObject *> m_map_pkObjectTable;

 #ifdef __GROWTH_PET_SYSTEM__

 	std::vector<TGrowthPetSkillTable>		m_vec_growthPetSkillTable;

-	TGrowthPetCacheMap				m_map_growthPetCache;

-	TGrowthPetCacheSetPtrMap		m_map_pkGrowthPetCacheSetPtr;

 #endif

 	bool m_bShutdowned;

 


--- server/server/home/metin2/Source/Server/db/src/ClientManagerPlayer.cpp
+++ server/server/home/metin2/Source/Server/db/src/ClientManagerPlayer.cpp
@@ -663,10 +663,10 @@
 	{

 		char szQuery[QUERY_MAX_LEN];

 		snprintf(szQuery, sizeof(szQuery),

-			"SELECT id,vnum,state+0,name,size,level,level_step,evolution,type,hp,sp,def,hp_apply,sp_apply,def_apply,"

+			"SELECT id,owner_id,vnum,state+0,name,size,level,level_step,evolution,type,hp,sp,def,hp_apply,sp_apply,def_apply,"

 			"age_apply,skill_level,exp,item_exp,UNIX_TIMESTAMP(birthday),end_time,max_time "

-			"FROM growth_pet%s WHERE owner_id=%d AND state < %d",

-			GetTablePostfix(), packet->player_id, STATE_SAFEBOX);

+			"FROM growth_pet%s WHERE owner_id=%d",

+			GetTablePostfix(), packet->player_id);

 

 		CDBManager::instance().ReturnQuery(szQuery,

 			QID_GROWTH_PET,


--- server/server/home/metin2/Source/Server/db/src/QID.h
+++ server/server/home/metin2/Source/Server/db/src/QID.h
@@ -35,9 +35,9 @@
 	QID_ITEMPRICE_LOAD, ///< 24, ¾ÆÀÌÅÛ °¡°ÝÁ¤º¸ ·Îµå Äõ¸®

 	// END_OF_MYSHOP_PRICE_LIST

 #ifdef __GROWTH_PET_SYSTEM__

-	QID_GROWTH_PET,

-	QID_GROWTH_PET_SAVE,

-	QID_GROWTH_PET_DELETE,

+    QID_GROWTH_PET,

+    QID_GROWTH_PET_SAVE,

+    QID_GROWTH_PET_DELETE,

 #endif

 #ifdef ENABLE_EXTENDED_BATTLE_PASS

 	QID_EXT_BATTLE_PASS,


--- server/server/home/metin2/Source/Server/game/src/affect.h
+++ server/server/home/metin2/Source/Server/game/src/affect.h
@@ -141,7 +141,7 @@
 	//AFFECT_PVP_ENTER = 545,

 

 #ifdef __GROWTH_PET_SYSTEM__

-	AFFECT_GROWTH_PET = 545,

+	AFFECT_GROWTH_PET,

 #endif

 

 #if defined(__SOUL_SYSTEM__)


--- server/server/home/metin2/Source/Server/game/src/char.cpp
+++ server/server/home/metin2/Source/Server/game/src/char.cpp
@@ -622,6 +622,7 @@
 	m_growthPetMap.clear();

 

 	m_bCharacterSize = 0;

+	m_dwLastGrowthPetActionTime = 0;

 #endif

 }

 

@@ -898,13 +899,13 @@
 #ifdef __GROWTH_PET_SYSTEM__

 	if (GetActiveGrowthPet())

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_YANINDAYKEN_PAZAR_ACAMAZSIN"));

+		ChatPacket(CHAT_TYPE_INFO, "You cannot open a private shop whilst summoning your pet.");

 		return;

 	}

 

 	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_STATLARINI_DEGISTIRME_UYARI"));

+		ChatPacket(CHAT_TYPE_INFO, "While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc.");

 		return;

 	}

 #endif

@@ -6024,23 +6025,21 @@
 	}

 

 #ifdef __GROWTH_PET_SYSTEM__

-/*

 	if (GetActiveGrowthPet())

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot fish while your pet is summoned."));

-		return;

-	}

-*/

+		ChatPacket(CHAT_TYPE_INFO, "You cannot fish while your pet is summoned.");

+		return;

+	}

 

 	if (IsPetHatchWindowOpen())

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_VARKEN_BALIK_TUTAMAZSIN"));

+		ChatPacket(CHAT_TYPE_INFO, "You cannot fish when your pet is hatched.");

 		return;

 	}

 

 	if (IsPetChangeNameWindowOpen())

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_BONUS_PENCERESI_ACIKKEN_BALIK_TUTAMAZSIN"));

+		ChatPacket(CHAT_TYPE_INFO, "You cannot fish while the pet bonus change window is open.");

 		return;

 	}

 #endif

@@ -7030,9 +7029,9 @@
 				if (pkChrCauser->IsDead() == true) return;

 

 #ifdef __GROWTH_PET_SYSTEM__

-				if (pkChrCauser->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || pkChrCauser->GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

+				if (pkChrCauser->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 				{

-					pkChrCauser->ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_STATLARINI_DEGISTIRME_UYARI"));

+					pkChrCauser->ChatPacket(CHAT_TYPE_INFO, "While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc.");

 					return;

 				}

 #endif

@@ -7095,9 +7094,9 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	if (pkChrCauser->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || pkChrCauser->GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

-	{

-		pkChrCauser->ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_STATLARINI_DEGISTIRIRKEN_NPC_ACAMAZSIN"));

+	if (pkChrCauser->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

+	{

+		pkChrCauser->ChatPacket(CHAT_TYPE_INFO, "You cannot speak with an NPC while modifying your pet's stats.");

 		return;

 	}

 #endif

@@ -7893,7 +7892,7 @@
 #ifdef __GROWTH_PET_SYSTEM__

 	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("PET_STATLARINI_DEGISTIRME_UYARI"));

+		ChatPacket(CHAT_TYPE_INFO, "While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc.");

 		return;

 	}

 #endif

@@ -9446,13 +9445,120 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	if (except && !(PET_WINDOW_ATTR_CHANGE & flags) || !except && (PET_WINDOW_ATTR_CHANGE & flags))

-		if (GetPetWindowType())

-			return true;

-

-	if (except && !(PET_WINDOW_PRIMIUM_FEEDSTUFF & flags) || !except && (PET_WINDOW_PRIMIUM_FEEDSTUFF & flags))

-		if (GetPetWindowType())

-			return true;

+bool CHARACTER::SetGrowthPet(LPGROWTH_PET pkPet)

+{

+	auto it = m_growthPetMap.find(pkPet->GetPetID());

+

+	if (it != m_growthPetMap.end())

+		m_growthPetMap.erase(it);

+

+	if (pkPet->GetOwner() != this)

+		pkPet->SetOwner(this);

+

+	m_growthPetMap.emplace(pkPet->GetPetID(), pkPet);

+

+	TPacketGCPetSet packet;

+	packet.header = HEADER_GC_PET_SET;

+	packet.dwID = pkPet->GetPetID();

+	packet.dwSummonItemVnum = pkPet->GetSummonItemVnum();

+

+	strlcpy(packet.szName, pkPet->GetPetName().c_str(), sizeof(packet.szName));

+	thecore_memcpy(packet.aSkill, pkPet->GetPetSkill(), sizeof(packet.aSkill));

+

+	for (int i = 0; i < POINT_UPBRINGING_MAX_NUM; i++)

+		packet.dwPoints[i] = pkPet->GetPetPoint(i);

+

+	if(GetDesc())

+		GetDesc()->Packet(&packet, sizeof(packet));

+

+	return true;

+}

+

+bool CHARACTER::DeleteGrowthPet(DWORD dwID)

+{

+	auto it = m_growthPetMap.find(dwID);

+

+	if (it == m_growthPetMap.end())

+		return false;

+

+	m_growthPetMap.erase(it);

+

+	TPacketGCPetDelete packet;

+	packet.header = HEADER_GC_PET_DEL;

+	packet.dwID = dwID;

+

+	if (GetDesc())

+		GetDesc()->Packet(&packet, sizeof(packet));

+

+	return true;

+}

+

+LPGROWTH_PET CHARACTER::GetGrowthPet(DWORD dwID)

+{

+	auto it = m_growthPetMap.find(dwID);

+

+	if (it != m_growthPetMap.end())

+		return it->second;

+

+	return nullptr;

+}

+

+void CHARACTER::ClearGrowthPet()

+{

+	if (m_activeGrowthPet)

+		m_activeGrowthPet->Unsummon();

+

+	if (m_growthPetMap.size())

+	{

+		auto it = m_growthPetMap.begin();

+

+		while (it != m_growthPetMap.end())

+		{

+			LPGROWTH_PET pPet = it->second;

+

+			pPet->Save();

+

+			// Increase the iterator before deleting pet pointer

+			++it;

+

+			CGrowthPetManager::Instance().DeleteGrowthPet(pPet->GetPetID());

+		}

+

+		m_growthPetMap.clear();

+	}

+}

+

+void CHARACTER::SendDeadPetMessage()

+{

+	for (auto kv : m_growthPetMap)

+	{

+		LPGROWTH_PET pPet = kv.second;

+

+

+		if (pPet->GetState() != STATE_UPBRINGING)

+			continue;

+

+		if (pPet->GetPetPoint(POINT_UPBRINGING_DURATION) < get_global_time())

+		{

+			TItemTable* pProto = ITEM_MANAGER::instance().GetTable(pPet->GetSummonItemVnum());

+			if (!pProto)

+				continue;

+

+			//ChatPacket(CHAT_TYPE_INFO, "%s is currently fast asleep.", pProto->szLocaleName);

+		}

+	}

+}

+bool CHARACTER::CheckGrowthPetFlood(DWORD intervalMs)

+{

+	const DWORD now = get_dword_time();

+	if (now - m_dwLastGrowthPetActionTime < intervalMs)

+		return false;

+

+	m_dwLastGrowthPetActionTime = now;

+	return true;

+}

+

+

 #endif

 

 	return false;


--- server/server/home/metin2/Source/Server/game/src/char.h
+++ server/server/home/metin2/Source/Server/game/src/char.h
@@ -2259,47 +2259,50 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-public:

-	bool	IsPet() const { return m_bCharType == CHAR_TYPE_PET_PAY; }

-	bool	IsGrowthPet() { return m_bCharType == CHAR_TYPE_PET; };

-	void	SetInvincible(bool bInvincible) { m_bInvincible = bInvincible; }

-	bool	IsInvincible() { return m_bInvincible; }

-

-	void	SetPetHatchWindow(bool bState) { m_bIsPetHatchOpen = bState; }

-	bool	IsPetHatchWindowOpen() { return m_bIsPetHatchOpen; }

-	void	SetPetChangeNameWindow(bool bState) { m_bIsPetChangeNameOpen = bState; }

-	bool	IsPetChangeNameWindowOpen() { return m_bIsPetChangeNameOpen; }

-

-	void	SetPetWindowType(BYTE bType) { m_bPetWindowType = bType; }

-	BYTE	GetPetWindowType() const { return m_bPetWindowType; }

-

-	void	SetGrowthPetLoaded(bool bState) { m_bIsGrowthPetLoaded = bState; }

-	bool	IsGrowthPetLoaded() { return m_bIsGrowthPetLoaded; }

-

-	void	SetCharacterSize(BYTE bSize) { m_bCharacterSize = bSize; }

-	BYTE	GetCharacterSize() { return m_bCharacterSize; }

-

-	bool			SetGrowthPet(LPGROWTH_PET pkPet);

-	bool			DeleteGrowthPet(DWORD dwID);

-	LPGROWTH_PET	GetGrowthPet(DWORD dwID);

-	void			ClearGrowthPet();

-

-	void			SetActiveGrowthPet(LPGROWTH_PET pkPet) { m_activeGrowthPet = pkPet;  }

-	LPGROWTH_PET	GetActiveGrowthPet() { return m_activeGrowthPet; }

-

-private:

-	DWORD	m_bInvincible;

-	bool	m_bIsPetHatchOpen;

-	bool	m_bIsPetChangeNameOpen;

-	BYTE	m_bPetWindowType;

-

-	bool	m_bIsGrowthPetLoaded;

-

-	CGrowthPetManager::TGrowthPetMap m_growthPetMap;

-	LPGROWTH_PET m_activeGrowthPet;

-

-	BYTE m_bCharacterSize;

-#endif

+		void	SetInvincible(bool bInvincible) { m_bInvincible = bInvincible; }

+		bool	IsInvincible() { return m_bInvincible; }

+

+		void	SetPetHatchWindow(bool bState) { m_bIsPetHatchOpen = bState; }

+		bool	IsPetHatchWindowOpen() { return m_bIsPetHatchOpen; }

+		void	SetPetChangeNameWindow(bool bState) { m_bIsPetChangeNameOpen = bState; }

+		bool	IsPetChangeNameWindowOpen() { return m_bIsPetChangeNameOpen; }

+

+		void	SetPetWindowType(BYTE bType) { m_bPetWindowType = bType; }

+		BYTE	GetPetWindowType() { return m_bPetWindowType; }

+

+		void	SetGrowthPetLoaded(bool bState) { m_bIsGrowthPetLoaded = bState; }

+		bool	IsGrowthPetLoaded() { return m_bIsGrowthPetLoaded; }

+

+		void	SetCharacterSize(BYTE bSize) { m_bCharacterSize = bSize; }

+		BYTE	GetCharacterSize() { return m_bCharacterSize; }

+

+		bool			SetGrowthPet(LPGROWTH_PET pkPet);

+		bool			DeleteGrowthPet(DWORD dwID);

+		LPGROWTH_PET	GetGrowthPet(DWORD dwID);

+		void			ClearGrowthPet();

+

+		void			SetActiveGrowthPet(LPGROWTH_PET pkPet) { m_activeGrowthPet = pkPet;  }

+		LPGROWTH_PET	GetActiveGrowthPet() { return m_activeGrowthPet; }

+

+		void			SendDeadPetMessage();

+

+		// simple flood guard for pet actions (ms)

+		bool			CheckGrowthPetFlood(DWORD intervalMs = 250);

+

+	private:

+		DWORD	m_bInvincible;

+		bool	m_bIsPetHatchOpen;

+		bool	m_bIsPetChangeNameOpen;

+		BYTE	m_bPetWindowType;

+

+		bool	m_bIsGrowthPetLoaded;

+

+		CGrowthPetManager::TGrowthPetMap	m_growthPetMap;

+		LPGROWTH_PET	m_activeGrowthPet;

+

+		BYTE			m_bCharacterSize;

+		DWORD			m_dwLastGrowthPetActionTime;

+#endif 

 

 protected:

 	LPCHARACTER m_chHorse;


--- server/server/home/metin2/Source/Server/game/src/char_item.cpp
+++ server/server/home/metin2/Source/Server/game/src/char_item.cpp
@@ -2852,183 +2852,11 @@
 	switch (item->GetType())

 	{

 #ifdef __GROWTH_PET_SYSTEM__

-		case ITEM_PET:

-			{

-				switch (item->GetSubType())

-				{

-					case PET_PAY:

-					{

-						if (GetArena() != NULL || IsObserverMode() == true)

-						{

-							if (item->GetVnum() == 50051 || item->GetVnum() == 50052 || item->GetVnum() == 50053)

-							{

-								ChatPacket(CHAT_TYPE_INFO, LC_STRING("´ë·Ã Áß¿¡´Â ÀÌ¿ëÇÒ ¼ö ¾ø´Â ¹°Ç°ÀÔ´Ï´Ù."));

-								return false;

-							}

-						}

-

-						if (!IS_SET(item->GetFlag(), ITEM_FLAG_QUEST_USE | ITEM_FLAG_QUEST_USE_MULTIPLE) || item->GetSubType() == PET_PAY)

-						{

-							if (item->GetSIGVnum() == 0)

-							{

-								quest::CQuestManager::instance().UseItem(GetPlayerID(), item, false);

-							}

-							else

-							{

-								quest::CQuestManager::instance().SIGUse(GetPlayerID(), item->GetSIGVnum(), item, false);

-							}

-						}

-						break;

-					}

-					

-					case PET_UPBRINGING:

-					{

-						LPGROWTH_PET pPet = GetGrowthPet(item->GetSocket(2));

-						if (pPet)

-						{

-							if (m_activeGrowthPet && m_activeGrowthPet->GetPetID() == pPet->GetPetID())

-							{

-								m_activeGrowthPet->Unsummon();

-								m_activeGrowthPet = nullptr;

-								return true;

-							}

-							else if (m_activeGrowthPet)

-								m_activeGrowthPet->Unsummon();

-

-							m_activeGrowthPet = pPet->Summon(item);

-						}

-					} break;

-

-					case PET_FEEDSTUFF:

-					{

-						LPITEM item2;

-

-						if (!GetItem(DestCell) || !(item2 = GetItem(DestCell)))

-							return false;

-

-						if (item2->GetType() != ITEM_PET && item2->GetSubType() != PET_UPBRINGING)

-							return false;

-

-						LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

-						if (!pPet)

-							return false;

-

-						if (item2->GetSocket(0) < get_global_time())

-						{

-							pPet->Revive(item2, PET_REVIVE_TYPE_NORMAL);

-							ITEM_MANAGER::instance().RemoveItem(item);

-						}

-						else

-						{

-							pPet->RewardFood(item, PET_FEED_TYPE_FULL);

-						}

-

-					} break;

-

-					case PET_BAG:

-					{

-						LPITEM item2 = GetItem(DestCell);

-						

-						if (item2)

-						{

-							if (item2->GetType() != ITEM_PET)

-								return false;

-

-							if (item2->GetSubType() != PET_UPBRINGING && item2->GetSubType() != PET_BAG)

-								return false;

-

-							switch (item2->GetSubType())

-							{

-								case PET_UPBRINGING:

-								{

-									LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

-									if (!pPet)

-										return false;

-

-									pPet->SetState(STATE_BAG);

-									pPet->SetSummonItem(nullptr);

-									pPet->Save();

-

-									time_t currentTime = time(0);

-									item->SetSocket(0, currentTime + item->GetLimitValue(0));

-									item->SetSocket(1, time(0));

-									item->SetSocket(2, pPet->GetPetID());

-									item->SetSocket(3, pPet->GetPetType());

-									item->StartRealTimeExpireEvent();

-

-									ITEM_MANAGER::instance().RemoveItem(item2, "REMOVE (UPBRINGING-BAG TRANSFER)");

-								} break;

-

-								case PET_BAG:

-								{

-									LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

-									if (!pPet)

-										return false;

-

-									/* Pet age equals to difference between birthday and current time minus time spent in bag */

-

-									// Time spent in bag: current time - the time pet was put into the bag

-									time_t currentTime = time(0);

-									DWORD dwBagTime = currentTime - (item2->GetSocket(0) - item2->GetLimitValue(0));

-									DWORD dwPetAge = currentTime - pPet->GetPetPoint(POINT_UPBRINGING_BIRTHDAY) - dwBagTime;

-

-									// Shift back pet's birthday from current time & update real time event

-									pPet->ChangePetPoint(POINT_UPBRINGING_BIRTHDAY, currentTime - dwPetAge, true);

-									pPet->Save();

-

-									item2->SetSocket(0, currentTime + item2->GetLimitValue(0));

-									item2->StartRealTimeExpireEvent();

-									item->SetSocket(3, pPet->GetPetType());

-

-									ITEM_MANAGER::instance().RemoveItem(item, "REMOVE (BAG-BAG TRANSFER)");

-								} break;

-							}

-						}

-						else

-						{

-							if (!item->GetSocket(2))

-								return false;

-

-							LPGROWTH_PET pPet = GetGrowthPet(item->GetSocket(2));

-							if (!pPet)

-								return false;

-

-							time_t currentTime = time(0);

-							DWORD dwBagTime = item->GetSocket(0) - item->GetLimitValue(0);

-							DWORD dwPetAge = currentTime - pPet->GetPetPoint(POINT_UPBRINGING_BIRTHDAY) - (currentTime - dwBagTime);

-							DWORD dwPetDuration = currentTime + pPet->GetPetPoint(POINT_UPBRINGING_MAX_DURATION);

-							LPITEM pUpBringingItem = AutoGiveItem(pPet->GetSummonItemVnum());

-

-							// Copy stats from old pet to a new table

-							TGrowthPet petTable;

-							pPet->CreateGrowthPetProto(&petTable);

-							petTable.dwID = pUpBringingItem->GetID();

-							petTable.lBirthday = currentTime - dwPetAge;

-							petTable.lEndTime = dwPetDuration;

-							petTable.bState = STATE_UPBRINGING;

-

-							// Create a new pet and copy stats from table to it

-							LPGROWTH_PET pNewPet = CGrowthPetManager::Instance().CreateGrowthPet(this, pUpBringingItem->GetID());

-							pNewPet->SetGrowthPetProto(&petTable);

-

-							// Sync upbringing sockets with the new pet

-							pUpBringingItem->SetSocket(0, dwPetDuration);

-							pUpBringingItem->SetSocket(1, petTable.lMaxTime);

-							pUpBringingItem->SetSocket(2, pUpBringingItem->GetID());

-							pUpBringingItem->SetSocket(3, item->GetSocket(3));

-

-							pPet->SetSummonItem(pUpBringingItem);

-							pPet->Save();

-

-							SetGrowthPet(pNewPet);

-

-							CGrowthPetManager::Instance().DeleteGrowthPet(item->GetSocket(2), true);

-							ITEM_MANAGER::instance().RemoveItem(item, "REMOVE (BAG-UPBRINGING TRANSFER)");

-						}

-					} break;

-				}

-

-			} break;

+	if (GetActiveGrowthPet())

+	{

+		ChatPacket(CHAT_TYPE_INFO, "You cannot improve that while an evolvable pet has been summoned.");

+		return false;

+	}

 #endif

 		case ITEM_HAIR:

 			return ItemProcess_Hair(item, wDestCell);

@@ -7692,9 +7520,9 @@
 	}

 

 #ifdef __GROWTH_PET_SYSTEM__

-	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

-	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot use items while modifying your pet's stats."));

+	if (GetActiveGrowthPet())

+	{

+		ChatPacket(CHAT_TYPE_INFO, "You cannot improve that while an evolvable pet has been summoned.");

 		return false;

 	}

 #endif

@@ -7939,11 +7767,155 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

-	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot drop items while modifying your pet's stats."));

-		return false;

-	}

+		case ITEM_PET:

+			{

+				switch (item->GetSubType())

+				{

+					case PET_UPBRINGING:

+					{

+						LPGROWTH_PET pPet = GetGrowthPet(item->GetSocket(2));

+						if (pPet)

+						{

+							if (m_activeGrowthPet && m_activeGrowthPet->GetPetID() == pPet->GetPetID())

+							{

+								m_activeGrowthPet->Unsummon();

+								m_activeGrowthPet = nullptr;

+								return true;

+							}

+							else if (m_activeGrowthPet)

+								m_activeGrowthPet->Unsummon();

+

+							m_activeGrowthPet = pPet->Summon(item);

+						}

+					} break;

+

+					case PET_FEEDSTUFF:

+					{

+						LPITEM item2;

+

+						if (!GetItem(DestCell) || !(item2 = GetItem(DestCell)))

+							return false;

+

+						if (item2->GetType() != ITEM_PET && item2->GetSubType() != PET_UPBRINGING)

+							return false;

+

+						LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

+						if (!pPet)

+							return false;

+

+						if (item2->GetSocket(0) < get_global_time())

+						{

+							pPet->Revive(item2, PET_REVIVE_TYPE_NORMAL);

+							ITEM_MANAGER::instance().RemoveItem(item);

+						}

+						else

+						{

+							pPet->RewardFood(item, PET_FEED_TYPE_FULL);

+						}

+

+					} break;

+

+					case PET_BAG:

+					{

+						LPITEM item2 = GetItem(DestCell);

+						

+						if (item2)

+						{

+							if (item2->GetType() != ITEM_PET)

+								return false;

+

+							if (item2->GetSubType() != PET_UPBRINGING && item2->GetSubType() != PET_BAG)

+								return false;

+

+							switch (item2->GetSubType())

+							{

+								case PET_UPBRINGING:

+								{

+									LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

+									if (!pPet)

+										return false;

+

+									pPet->SetState(STATE_BAG);

+									pPet->SetSummonItem(nullptr);

+									pPet->Save();

+

+									time_t currentTime = time(0);

+									item->SetSocket(0, currentTime + item->GetLimitValue(0));

+									item->SetSocket(1, time(0));

+									item->SetSocket(2, pPet->GetPetID());

+									item->StartRealTimeExpireEvent();

+

+									ITEM_MANAGER::instance().RemoveItem(item2, "REMOVE (UPBRINGING-BAG TRANSFER)");

+								} break;

+

+								case PET_BAG:

+								{

+									LPGROWTH_PET pPet = GetGrowthPet(item2->GetSocket(2));

+									if (!pPet)

+										return false;

+

+									/* Pet age equals to difference between birthday and current time minus time spent in bag */

+

+									// Time spent in bag: current time - the time pet was put into the bag

+									time_t currentTime = time(0);

+									DWORD dwBagTime = currentTime - (item2->GetSocket(0) - item2->GetLimitValue(0));

+									DWORD dwPetAge = currentTime - pPet->GetPetPoint(POINT_UPBRINGING_BIRTHDAY) - dwBagTime;

+

+									// Shift back pet's birthday from current time & update real time event

+									pPet->ChangePetPoint(POINT_UPBRINGING_BIRTHDAY, currentTime - dwPetAge, true);

+									pPet->Save();

+

+									item2->SetSocket(0, currentTime + item2->GetLimitValue(0));

+									item2->StartRealTimeExpireEvent();

+

+									ITEM_MANAGER::instance().RemoveItem(item, "REMOVE (BAG-BAG TRANSFER)");

+								} break;

+							}

+						}

+						else

+						{

+							if (!item->GetSocket(2))

+								return false;

+

+							LPGROWTH_PET pPet = GetGrowthPet(item->GetSocket(2));

+							if (!pPet)

+								return false;

+

+							time_t currentTime = time(0);

+							DWORD dwBagTime = item->GetSocket(0) - item->GetLimitValue(0);

+							DWORD dwPetAge = currentTime - pPet->GetPetPoint(POINT_UPBRINGING_BIRTHDAY) - (currentTime - dwBagTime);

+							DWORD dwPetDuration = currentTime + pPet->GetPetPoint(POINT_UPBRINGING_MAX_DURATION);

+							LPITEM pUpBringingItem = AutoGiveItem(pPet->GetSummonItemVnum());

+

+							// Copy stats from old pet to a new table

+							TGrowthPet petTable;

+							pPet->CreateGrowthPetProto(&petTable);

+							petTable.dwID = pUpBringingItem->GetID();

+							petTable.lBirthday = currentTime - dwPetAge;

+							petTable.lEndTime = dwPetDuration;

+							petTable.bState = STATE_UPBRINGING;

+

+							// Create a new pet and copy stats from table to it

+							LPGROWTH_PET pNewPet = CGrowthPetManager::Instance().CreateGrowthPet(this, pUpBringingItem->GetID());

+							pNewPet->SetGrowthPetProto(&petTable);

+

+							// Sync upbringing sockets with the new pet

+							pUpBringingItem->SetSocket(0, dwPetDuration);

+							pUpBringingItem->SetSocket(1, petTable.lMaxTime);

+							pUpBringingItem->SetSocket(2, pUpBringingItem->GetID());

+

+							pPet->SetSummonItem(pUpBringingItem);

+							pPet->Save();

+

+							SetGrowthPet(pNewPet);

+

+							CGrowthPetManager::Instance().DeleteGrowthPet(item->GetSocket(2), true);

+							ITEM_MANAGER::instance().RemoveItem(item, "REMOVE (BAG-UPBRINGING TRANSFER)");

+						}

+					} break;

+				}

+

+			} break;

 #endif

 

 	if (IsRunningQuest())

@@ -8064,8 +8036,11 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	if (item->IsPet())

-		return false;

+	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

+	{

+		ChatPacket(CHAT_TYPE_INFO, "You cannot use items while modifying your pet's stats.");

+		return false;

+	}

 #endif

 

 	if (INVENTORY == Cell.window_type)

@@ -8243,7 +8218,7 @@
 #ifdef __GROWTH_PET_SYSTEM__

 	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot move items while modifying your pet's stats."));

+		ChatPacket(CHAT_TYPE_INFO, "You cannot drop items while modifying your pet's stats.");

 		return false;

 	}

 #endif


--- server/server/home/metin2/Source/Server/game/src/cmd.cpp
+++ server/server/home/metin2/Source/Server/game/src/cmd.cpp
@@ -352,7 +352,7 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-ACMD(do_pet_set);

+ACMD (do_pet_set);

 #endif

 

 struct command_info cmd_info[] =

@@ -731,7 +731,7 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	{ "pet_set",			do_pet_set, 		0, POS_DEAD,		GM_IMPLEMENTOR },

+	{ "pet_set", do_pet_set, 0, POS_DEAD, GM_IMPLEMENTOR },

 #endif

 

 	{ "\n", NULL, 0, POS_DEAD, GM_IMPLEMENTOR } /* ¹Ýµå½Ã ÀÌ °ÍÀÌ ¸¶Áö¸·ÀÌ¾î¾ß ÇÑ´Ù. */


--- server/server/home/metin2/Source/Server/game/src/cmd_gm.cpp
+++ server/server/home/metin2/Source/Server/game/src/cmd_gm.cpp
@@ -1020,8 +1020,18 @@
 #if defined(__PET_SYSTEM__)

 			&& !pkChr->IsPet()

 #endif

-#if defined(__GROWTH_PET_SYSTEM__)

-			&& !pkChr->IsGrowthPet()

+#ifdef __GROWTH_PET_SYSTEM__

+				/*

+					UPBRINGING/BAG item should not be deleted in any way by default.

+					If you have other functions that allow you to delete items,

+					either block destroying UPBRINGING/BAG items or add the following

+					code.

+				*/

+				if (item->GetType() == ITEM_PET)

+				{

+					if (item->GetSubType() == PET_UPBRINGING || item->GetSubType() == PET_BAG)

+						CGrowthPetManager::Instance().DeleteGrowthPet(item->GetSocket(0), true);

+				}

 #endif

 			)

 		{

@@ -1065,11 +1075,17 @@
 					continue;

 

 #ifdef __GROWTH_PET_SYSTEM__

-				if (item->GetType() == ITEM_PET)

-				{

-					if (item->GetSubType() == PET_UPBRINGING || item->GetSubType() == PET_BAG)

-						CGrowthPetManager::Instance().DeleteGrowthPet(item->GetSocket(2), true);

-				}

+					/*

+						UPBRINGING/BAG item should not be deleted in any way by default.

+						If you have other functions that allow you to delete items,

+						either block destroying UPBRINGING/BAG items or add the following

+						code.

+					*/

+					if (item->GetType() == ITEM_PET)

+					{

+						if (item->GetSubType() == PET_UPBRINGING || item->GetSubType() == PET_BAG)

+							CGrowthPetManager::Instance().DeleteGrowthPet(item->GetSocket(0), true);

+					}

 #endif

 

 				ITEM_MANAGER::instance().RemoveItem(item, "PURGE");

@@ -6226,7 +6242,6 @@
 	"itemevo",

 	"time",

 	"age",

-	"maxtime",

 	"\n",

 };

 

@@ -6246,7 +6261,7 @@
 

 	if(!ch->GetActiveGrowthPet())

 	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("ONCE_PETI_CAGIR"));

+		ch->ChatPacket(CHAT_TYPE_INFO, "You need to summon your pet first.");

 		return;

 	}

 

@@ -6362,18 +6377,6 @@
 			ch->GetActiveGrowthPet()->ChangePetPoint(POINT_UPBRINGING_BIRTHDAY, dwAge, true);

 		}

 		break;

-		

-		case 11: // Max Time life

-		{

-			int max_time = 0;

-			str_to_number(max_time, arg2);

-			// DWORD maxTime = time(0) - (age * 3600 * 24);

-			// ch->GetActiveGrowthPet()->ChangePetPoint(POINT_UPBRINGING_BIRTHDAY, dwAge, true);

-			ch->ChatPacket(CHAT_TYPE_INFO, "OLD_Cur pet max life = %d", ch->GetActiveGrowthPet()->GetPetPoint(POINT_UPBRINGING_MAX_DURATION));

-			ch->GetActiveGrowthPet()->ChangePetPoint(POINT_UPBRINGING_MAX_DURATION, max_time, true);

-			ch->ChatPacket(CHAT_TYPE_INFO, "NEW_Cur pet max life = %d", ch->GetActiveGrowthPet()->GetPetPoint(POINT_UPBRINGING_MAX_DURATION));

-		}

-		break;

-	}

-}

-#endif

+	}

+}

+#endif


--- server/server/home/metin2/Source/Server/game/src/constants.cpp
+++ server/server/home/metin2/Source/Server/game/src/constants.cpp
@@ -43,7 +43,7 @@
 			{30083, 10}, // Unknown Medicine+

 			{27992, 2},  // White Pearl

 			{27993, 2},  // Blue Pearl

-			{30086, 10}, // Demon?s Keepsake+

+			{30086, 10}, // Demon¡¯s Keepsake+

 			{30077, 10}, // Orc Tooth+

 			{30550, 5},  // Blue Belt

 		}


--- server/server/home/metin2/Source/Server/game/src/exchange.cpp
+++ server/server/home/metin2/Source/Server/game/src/exchange.cpp
@@ -107,17 +107,16 @@
 #ifdef __GROWTH_PET_SYSTEM__

 	if (GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc."));

+		ChatPacket(CHAT_TYPE_INFO, "While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc.");

 		return false;

 	}

 

 	if (victim->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || victim->GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot trade while your trading partner is modifying their pet's stats."));

-		return false;

-	}

-

-	/*

+		ChatPacket(CHAT_TYPE_INFO, "You cannot trade while your trading partner is modifying their pet's stats.");

+		return false;

+	}

+

 	if (GetActiveGrowthPet())

 	{

 		ChatPacket(CHAT_TYPE_INFO, "You cannot open a private shop whilst summoning your pet.");

@@ -129,7 +128,6 @@
 		ChatPacket(CHAT_TYPE_INFO, "You cannot trade whilst your partner is summoning their pet.");

 		return false;

 	}

-	*/

 #endif

 

 #if defined(__MESSENGER_BLOCK_SYSTEM__)


--- server/server/home/metin2/Source/Server/game/src/growth_pet.cpp
+++ server/server/home/metin2/Source/Server/game/src/growth_pet.cpp
@@ -1,4 +1,5 @@
 #include "stdafx.h"

+#ifdef __GROWTH_PET_SYSTEM__

 #include "growth_pet.h"

 #include "utils.h"

 #include "vector.h"

@@ -144,7 +145,8 @@
 	{

 		info->pPet->GetGrowthPet()->EffectPacket(SE_GYEONGGONG_BOOM);

 

-		const DWORD dwPetLevel = info->pPet->GetPetPoint(POINT_UPBRINGING_PET_LEVEL) - 81;

+		const int __petLevelRaw = (int)info->pPet->GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

+		const DWORD dwPetLevel = (__petLevelRaw > 81) ? (DWORD)(__petLevelRaw - 81) : 0;

 		info->pSkillPoly->SetVar("lv", dwPetLevel);

 		info->pSkillPoly->SetVar("k", info->bSkillLevel);

 		WORD wSkillValue = (WORD)info->pSkillPoly->Eval();

@@ -189,7 +191,7 @@
 ///////////////////////////////////////////////////////////////////////////////////////

 CGrowthPet::CGrowthPet(LPCHARACTER pOwner)

 {

-	m_pGrowthPet = nullptr;

+	m_pGrowthPet = 0;

 	m_pOwner = pOwner;

 

 	m_dwID = 0;

@@ -228,21 +230,25 @@
 

 LPGROWTH_PET CGrowthPet::Summon(LPITEM pSummonItem, bool bIsResummon /* = false */)

 {

+	TItemTable* lItem = ITEM_MANAGER::instance().GetTable(pSummonItem->GetVnum());

+	if (!lItem)

+		return nullptr;

+

 	if (GetPetPoint(POINT_UPBRINGING_DURATION) < time(0))

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s is currently fast asleep."), m_strName.c_str());

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s is currently fast asleep.", lItem->szLocaleName);

 		return nullptr;

 	}

 

 	if (GetPetPoint(POINT_UPBRINGING_PET_LEVEL) > m_pOwner->GetLevel())

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your level is too low to summon the pet."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your level is too low to summon the pet.");

 		return nullptr;

 	}

 

 	if (m_pOwner->GetExchange() || m_pOwner->IsOpenSafebox() || m_pOwner->GetMyShop() || m_pOwner->GetShopOwner() || m_pOwner->IsCubeOpen())

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot summon your pet whilst trading."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You cannot summon your pet whilst trading.");

 		return nullptr;

 	}

 

@@ -263,9 +269,9 @@
 	y += number(-100, 100);

 

 	const DWORD dwPetEvol = GetPetPoint(POINT_UPBRINGING_PET_EVOL_LEVEL);

-	DWORD dwPetVnum = dwPetEvol < PET_EVOLUTION_4 ? pSummonItem->GetValue(0) : pSummonItem->GetValue(3);

-

-	m_pGrowthPet = CHARACTER_MANAGER::Instance().SpawnMob(

+	const DWORD dwPetVnum = dwPetEvol < PET_EVOLUTION_4 ? pSummonItem->GetValue(0) : pSummonItem->GetValue(3);

+

+	m_pGrowthPet = CHARACTER_MANAGER::instance().SpawnMob(

 		dwPetVnum,

 		m_pOwner->GetMapIndex(),

 		x, y, z,

@@ -303,15 +309,12 @@
 

 	if (!bIsResummon)

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You have summoned %s."), m_strName.c_str());

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You have summoned %s.", m_strName.c_str());

 

 		m_bMobExpMsg = false;

 		m_bItemExpMsg = false;

 	}

 

-	if (m_pOwner && m_pOwner->GetDesc())

-		m_pOwner->SetQuestFlag("system.grow_pet_summoned", pSummonItem->GetID());

-

 	m_pOwner->ComputePoints();

 

 	growthpet_update_event_info* info = AllocEventInfo<growthpet_update_event_info>();

@@ -322,7 +325,7 @@
 	return this;

 }

 

-void CGrowthPet::Unsummon(bool bSetFlag)

+void CGrowthPet::Unsummon()

 {

 	if (IsSummoned())

 	{

@@ -339,10 +342,7 @@
 

 			m_pOwner->GetDesc()->Packet(&packet, sizeof(packet));

 

-			m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You have dismissed %s."), m_strName.c_str());

-			

-			if (bSetFlag)

-				m_pOwner->SetQuestFlag("system.grow_pet_summoned", 0);

+			m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You have dismissed %s.", m_strName.c_str());

 		}

 	}

 

@@ -363,7 +363,7 @@
 	bool bResult = true;

 	bool bUnsummon = false;

 

-	if (IsSummoned() && (m_pGrowthPet && m_pGrowthPet->IsDead()))

+	if (IsSummoned() && m_pGrowthPet->IsDead())

 		bUnsummon = true;

 	else if (!m_pSummonItem)

 		bUnsummon = true;

@@ -561,7 +561,7 @@
 	SetPetPoint(POINT_UPBRINGING_BIRTHDAY, pGrowthPetTable->lBirthday);

 

 	RefreshAutoSkillFlag();

-

+	

 	m_pSummonItem = ITEM_MANAGER::Instance().FindByVID(m_dwID);

 }

 

@@ -628,7 +628,7 @@
 			DWORD dwNewLevel = GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

 

 			if(m_pOwner)

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s has reached level %d!"), m_strName.c_str(), dwNewLevel);

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s has reached level %d!", m_strName.c_str(), dwNewLevel);

 

 			ChangePetPoint(POINT_UPBRINGING_PET_NEXT_EXP, GetRequiredTotalExp(dwNewLevel), true);

 

@@ -701,11 +701,11 @@
 		return;

 

 	struct packet_point_change pack;

-	pack.bHeader = HEADER_GC_CHARACTER_POINT_CHANGE;

+	pack.header = HEADER_GC_CHARACTER_POINT_CHANGE;

 	pack.dwVID = m_pGrowthPet->GetVID();

-	pack.wType = POINT_LEVEL;

-	pack.lValue = GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

-	pack.lAmount = 0;

+	pack.type = POINT_LEVEL;

+	pack.value = GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

+	pack.amount = 0;

 

 	GetOwner()->PacketAround(&pack, sizeof(pack));

 }

@@ -720,11 +720,11 @@
 

 	struct packet_point_change pack;

 

-	pack.bHeader = HEADER_GC_CHARACTER_POINT_CHANGE;

+	pack.header = HEADER_GC_CHARACTER_POINT_CHANGE;

 	pack.dwVID = m_pGrowthPet->GetVID();

-	pack.wType = POINT_LEVEL_STEP;

-	pack.lValue = 0;

-	pack.lAmount = 0;

+	pack.type = POINT_LEVEL_STEP;

+	pack.value = 0;

+	pack.amount = 0;

 

 	DWORD dwCurrentEXP = GetPetPoint(POINT_UPBRINGING_PET_EXP);

 	DWORD dwNextEXP = GetRequiredMobExp(GetPetPoint(POINT_UPBRINGING_PET_LEVEL));

@@ -771,7 +771,8 @@
 		return;

 

 	const DWORD dwPetVnum = m_pSummonItem->GetVnum();

-	const DWORD dwPetLevel = GetPetPoint(POINT_UPBRINGING_PET_LEVEL) - 81;

+	const int __petLevelRaw = (int)GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

+	const DWORD dwPetLevel = (__petLevelRaw > 81) ? (DWORD)(__petLevelRaw - 81) : 0;

 

 	TPacketGCPetSkillUpdate packet;

 	packet.header = HEADER_GC_PET_SKILL_UPDATE;

@@ -830,6 +831,7 @@
 						pSkillProto->kActivatePctPoly.SetVar("k", j);

 						bSkillFormula1 = (BYTE)pSkillProto->kActivatePctPoly.Eval();

 					}

+

 					packet.aSkill[i].bSkillFormula1[j - 1] = bSkillFormula1;

 

 					pSkillProto->kDurationPoly.SetVar("lv", dwPetLevel);

@@ -856,6 +858,7 @@
 	Change pet's name if new chosen name is valid and

 	player has enough money.

 */

+

 void CGrowthPet::NameChange(const char* c_szName, LPITEM pChangeNameItem, LPITEM pUpBringingItem)

 {

 	if (!m_pOwner)

@@ -872,7 +875,7 @@
 		packet.subheader = SUBHEADER_PET_NAME_CHANGE_FAILED;

 		m_pOwner->GetDesc()->Packet(&packet, sizeof(packet));

 

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The name entered is too short."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "The name entered is too short.");

 		return;

 	}

 

@@ -881,7 +884,7 @@
 		packet.subheader = SUBHEADER_PET_NAME_CHANGE_FAILED;

 		m_pOwner->GetDesc()->Packet(&packet, sizeof(packet));

 

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Please enter another name."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Please enter another name.");

 		return;

 	}

 

@@ -890,11 +893,11 @@
 		packet.subheader = SUBHEADER_PET_NAME_CHANGE_FAILED;

 		m_pOwner->GetDesc()->Packet(&packet, sizeof(packet));

 

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Please enter another name."));

-		return;

-	}

-

-	char szNameText[64 + 1];

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Please enter another name.");

+		return;

+	}

+

+	char szNameText[PET_NAME_MAX_SIZE + 1];

 	DBManager::instance().EscapeString(szNameText, sizeof(szNameText), c_szName, strlen(c_szName));

 

 	int iPrice = PET_HATCHING_MONEY;

@@ -903,7 +906,7 @@
 		packet.subheader = SUBHEADER_PET_NAME_CHANGE_FAILED;

 		m_pOwner->GetDesc()->Packet(&packet, sizeof(packet));

 

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You do not have enough Yang."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You do not have enough Yang.");

 		return;

 	}

 

@@ -932,7 +935,7 @@
 

 	if (feedPacket->index == FEED_LIFE_TIME_EVENT && m_pOwner->IsUnderRefine())

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You cannot feed your pet while the refinement window is open."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You cannot feed your pet while the refinement window is open.");

 		return;

 	}

 

@@ -973,13 +976,11 @@
 				// Break loop if pet has reached maximum life

 				if (!RewardFood(item, PET_FEED_TYPE_PCT))

 					break;

-

 			}

 		} break;

 

 		case FEED_EXP_EVENT:

 		{

-			DWORD dwTotalEXP = 0;

 			for (int i = 0; i < PET_FEED_SLOT_MAX; ++i)

 			{

 				if (!feedPacket->count[i])

@@ -992,12 +993,12 @@
 					break;

 				}

 

-				DWORD dwItemEXP = 0;

+				DWORD itemEXP = 0;

 				switch (item->GetType())

 				{

 					case ITEM_WEAPON:

 					case ITEM_ARMOR:

-						dwItemEXP = (item->GetCount() * item->GetShopBuyPrice()) / 2;

+						itemEXP = (item->GetCount() * item->GetShopBuyPrice()) / 2;

 						break;

 

 					case ITEM_PET:

@@ -1005,28 +1006,23 @@
 						switch (item->GetSubType())

 						{

 							case PET_EXPFOOD:

-								dwItemEXP = (item->GetCount() * item->GetShopBuyPrice()) / 2;

+								itemEXP = (item->GetCount() * item->GetShopBuyPrice()) / 2;

 								break;

 

 							case PET_EXPFOOD_PER:

-								dwItemEXP = GetRequiredItemExp(GetPetPoint(POINT_UPBRINGING_PET_LEVEL)) * 0.05f;

+								itemEXP = GetRequiredItemExp(GetPetPoint(POINT_UPBRINGING_PET_LEVEL)) * 0.05f;

 								break;

 

 						}

 					} break;

 				}

 				// Reward pet with EXP, if failed break the process 

-				if (RewardEXP(EXP_TYPE_ITEM, dwItemEXP))

-				{

-					ITEM_MANAGER::Instance().RemoveItem(item);

-					dwTotalEXP += dwItemEXP;

-

-				}

+				if (RewardEXP(EXP_TYPE_ITEM, itemEXP))

+					// M2_DESTROY_ITEM(item);

+					ITEM_MANAGER::instance().RemoveItem(item);

 				else

 					break;

 			}

-

-			m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Experience has increased to %d points."), dwTotalEXP);

 		} break;

 

 		case FEED_EVOL_EVENT:

@@ -1155,7 +1151,7 @@
 				{

 					if (!m_bItemExpMsg && (dwCurrentItemEXP >= GetRequiredItemExp(dwPetLevel)))

 					{

-						m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet has gathered enough experience. It now requires Item EXP to reach the next stage of evolution."));

+						m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet has gathered enough experience. It now requires Item EXP to reach the next stage of evolution.");

 						m_bItemExpMsg = true;

 					}

 

@@ -1180,7 +1176,7 @@
 					{

 						if (!m_bMobExpMsg && (bError == LEVELUP_ERROR_OWNER_LEVEL))

 						{

-							m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The pet's level cannot be higher than the player's."));

+							m_pOwner->ChatPacket(CHAT_TYPE_INFO, "The pet's level cannot be higher than the player's.");

 							m_bMobExpMsg = true;

 						}

 

@@ -1201,7 +1197,7 @@
 			{

 				if (!m_bItemExpMsg)

 				{

-					m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet has gathered enough experience. It now requires Item EXP to reach the next stage of evolution."));

+					m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet has gathered enough experience. It now requires Item EXP to reach the next stage of evolution.");

 					m_bItemExpMsg = true;

 				}

 			}

@@ -1216,9 +1212,9 @@
 			if (dwCurrentItemEXP >= dwRequiredItemEXP)

 			{

 				if (bError == LEVELUP_ERROR_OWNER_LEVEL && (dwCurrentMobEXP >= GetRequiredMobExp(dwPetLevel)))

-					m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The pet's level cannot be higher than the player's."));

-

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s refuses to eat anything!"), m_strName.c_str());

+					m_pOwner->ChatPacket(CHAT_TYPE_INFO, "The pet's level cannot be higher than the player's.");

+

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "% s refuses to eat anything!", m_strName.c_str());

 

 				return false;

 			}

@@ -1237,7 +1233,7 @@
 					if (bError != LEVELUP_ERROR_NONE)

 					{

 						if (bError == LEVELUP_ERROR_OWNER_LEVEL)

-							m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The pet's level cannot be higher than the player's."));

+							m_pOwner->ChatPacket(CHAT_TYPE_INFO, "The pet's level cannot be higher than the player's.");

 

 						return true;

 					}

@@ -1334,7 +1330,8 @@
 	if (pItem->GetSubType() == PET_UPBRINGING)

 		CGrowthPetManager::Instance().DeleteGrowthPet(pItem->GetSocket(2), true);

 

-	ITEM_MANAGER::Instance().RemoveItem(pItem);

+	// M2_DESTROY_ITEM(pItem);

+	ITEM_MANAGER::instance().RemoveItem(pItem);

 

 	return true;

 }

@@ -1393,7 +1390,8 @@
 		if (dwItemCount < requiredMaterialCount)

 		{

 			requiredMaterialCount -= dwItemCount;

-			ITEM_MANAGER::Instance().RemoveItem(item);

+			//M2_DESTROY_ITEM(item);

+			ITEM_MANAGER::instance().RemoveItem(item);

 			continue;

 		}

 		else

@@ -1441,7 +1439,7 @@
 	else

 	{

 		ChangePetPoint(POINT_UPBRINGING_BIRTHDAY, time(0), true);

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet enthusiastically tucks into the Protein Snack."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet enthusiastically tucks into the Protein Snack.");

 	}

 

 	m_dwAgeApply = 0;

@@ -1478,9 +1476,9 @@
 			}

 

 			if (i < PET_EVOLUTION_3)

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet is ready to evolve. Use Pet Books to achieve this."));

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet is ready to evolve. Use Pet Books to achieve this.");

 			else if (i == PET_EVOLUTION_3)

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Acquire the Valiant Pet Book for your pet's hero training."));

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Acquire the Valiant Pet Book for your pet's hero training.");

 		}

 	}

 }

@@ -1500,22 +1498,22 @@
 

 	if (dwEvolution == PET_EVOLUTION_4)

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet has already reached the highest stage of evolution."));

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet has already reached the highest stage of evolution.");

 		return true;

 	}

 

 	DWORD idx = dwEvolution - 1;

 	DWORD dwLevel = GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

 

-	if (dwLevel >= m_pOwner->GetLevel() && dwEvolution < PET_EVOLUTION_3)

-	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The pet's level cannot be higher than the player's."));

+	if (dwLevel >= m_pOwner->GetLevel() && dwEvolution < PET_EVOLUTION_4)

+	{

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "The pet's level cannot be higher than the player's.");

 		return true;

 	}

 

 	if (dwLevel < arPetEvolutionTable[idx].dwLevel)

 	{

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet must be level %d to train and promote it to the next stage of evolution."), arPetEvolutionTable[idx].dwLevel);

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet must be level %d to train and promote it to the next stage of evolution.", arPetEvolutionTable[idx].dwLevel);

 		return true;

 	}

 

@@ -1523,7 +1521,7 @@
 	{

 		if ((GetPetPoint(POINT_UPBRINGING_PET_EXP) + GetPetPoint(POINT_UPBRINGING_PET_ITEM_EXP)) < GetPetPoint(POINT_UPBRINGING_PET_NEXT_EXP))

 		{

-			m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet must have 100% experience to train and promote it to the next stage of evolution."));

+			m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet must have 100% experience to train and promote it to the next stage of evolution.");

 			return true;

 		}

 	}

@@ -1534,7 +1532,7 @@
 

 		if (dwDayCount < PET_LAST_EVOL_MIN_DAY_COUNT)

 		{

-			m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet must be %d days old to train and promote it to the next stage of evolution."), PET_LAST_EVOL_MIN_DAY_COUNT);

+			m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet must be %d days old to train and promote it to the next stage of evolution.", PET_LAST_EVOL_MIN_DAY_COUNT);

 			return true;

 		}

 	}

@@ -1547,10 +1545,6 @@
 

 		for (int j = 0; j < PET_FEED_SLOT_MAX; ++j)

 		{

-

-			if (requiredItem.first == 0)

-				continue;

-

 			// We hit end of the array, break the loop

 			if (!feedPacket->count[j])

 				break;

@@ -1568,9 +1562,9 @@
 

 		if (!bIsFound)

 		{

-			TItemTable* lItem = ITEM_MANAGER::Instance().GetTable(requiredItem.first);

+			TItemTable* lItem = ITEM_MANAGER::instance().GetTable(requiredItem.first);

 			if (lItem)

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s is insufficient. You need %d for the next stage of evolution."), lItem->szLocaleName, requiredItem.second);

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s is insufficient. You need %d for the next stage of evolution.", lItem->szLocaleName, requiredItem.second);

 		}

 	}

 

@@ -1599,7 +1593,7 @@
 			ChangePetPoint(POINT_UPBRINGING_PET_LEVEL, 1);

 		}

 

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s has evolved to %s! Excellent!"), m_strName.c_str(), arPetEvolutionTable[idx].szEvolutionName);

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s has evolved to %s! Excellent!", m_strName.c_str(), arPetEvolutionTable[idx].szEvolutionName);

 	}

 

 	return true;

@@ -1621,7 +1615,7 @@
 	Summon(m_pSummonItem, true);

 	

 	if(GetPetPoint(POINT_UPBRINGING_PET_EVOL_LEVEL) > PET_EVOLUTION_1)

-		m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s has evolved to %s! Excellent!"), m_strName.c_str(), arPetEvolutionTable[dwEvolution - 2].szEvolutionName);

+		m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s has evolved to %s! Excellent!", m_strName.c_str(), arPetEvolutionTable[dwEvolution - 2].szEvolutionName);

 }

 

 /*

@@ -1849,7 +1843,6 @@
 	ChangePetPoint(POINT_UPBRINGING_DURATION, time(0) + petDuration, true);

 	pSummonItem->SetSocket(0, time(0) + petDuration);

 	pSummonItem->SetSocket(1, petDuration);

-	pSummonItem->SetSocket(3, m_bType);

 

 	// Change skill slot count in case no skills have been learned yet

 	bool bChangeSkill = true;

@@ -1867,7 +1860,6 @@
 		BYTE bSkillCount = number(1, hatchTable.bMaxSKillCount);

 		if (pSummonItem->GetVnum() == PET_EXEDYAR)

 			bSkillCount = 3;

-

 		for (int i = 0; i < PET_SKILL_COUNT_MAX; ++i)

 		{

 			if(i < bSkillCount)

@@ -1877,11 +1869,7 @@
 		}

 	}

 

-	m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet's stats have been modified."));

-

-#ifdef ENABLE_EXTENDED_BATTLE_PASS

-	m_pOwner->UpdateExtBattlePassMissionProgress(PET_ENCHANT, 1, m_bType);

-#endif

+	m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet's stats have been modified.");

 

 	if (m_pOwner->GetDesc())

 	{

@@ -1904,6 +1892,12 @@
 	if (!m_pOwner)

 		return;

 

+	if (!pSkillBookItem)

+		return;

+

+	if (bSlot >= PET_GROWTH_SKILL_MAX_NUM)

+		return;

+

 	if (GetPetPoint(POINT_UPBRINGING_PET_EVOL_LEVEL) < PET_GROWTH_SKILL_OPEN_EVOL_LEVEL)

 		return;

 

@@ -1918,7 +1912,7 @@
 	{

 		if (skill.bSkill == bSkillValue)

 		{

-			m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Your pet has already learnt this skill and refuses to practice it again."));

+			m_pOwner->ChatPacket(CHAT_TYPE_INFO, "Your pet has already learnt this skill and refuses to practice it again.");

 			return;

 		}

 	}

@@ -1926,9 +1920,10 @@
 	m_aSkill[bSlot].bLevel = 1;

 	m_aSkill[bSlot].bSkill = bSkillValue;

 

-	m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You've taught your pet well! It's quickly learning its new skills!"));

-

-	ITEM_MANAGER::Instance().RemoveItem(pSkillBookItem);

+	m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You've taught your pet well! It's quickly learning its new skills!");

+

+	//M2_DESTROY_ITEM(pSkillBookItem);

+	ITEM_MANAGER::instance().RemoveItem(pSkillBookItem);

 

 	RefreshAutoSkillFlag();

 	UpdateSkillPacket();

@@ -1941,6 +1936,9 @@
 	if (!m_pOwner)

 		return;

 

+	if (bSlot >= PET_GROWTH_SKILL_MAX_NUM)

+		return;

+

 	if (GetPetPoint(POINT_UPBRINGING_PET_EVOL_LEVEL) < PET_GROWTH_SKILL_OPEN_EVOL_LEVEL)

 		return;

 

@@ -1958,7 +1956,7 @@
 	m_pOwner->PointChange(POINT_GOLD, -iPrice);

 	m_aSkill[bSlot].bLevel += 1;

 

-	m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You've taught your pet well! It's quickly learning its new skills!"));

+	m_pOwner->ChatPacket(CHAT_TYPE_INFO, "You've taught your pet well! It's quickly learning its new skills!");

 

 	UpdateSkillPacket();

 

@@ -1977,7 +1975,8 @@
 	m_aSkill[bSlot].bSkill = 0;

 	m_aSkill[bSlot].bLevel = 0;

 	m_aSkill[bSlot].dwCooltime = 0;

-	ITEM_MANAGER::Instance().RemoveItem(pSkillDeleteItem);

+	// M2_DESTROY_ITEM(pSkillDeleteItem);

+	ITEM_MANAGER::instance().RemoveItem(pSkillDeleteItem);

 

 	RefreshAutoSkillFlag();

 	UpdateSkillPacket();

@@ -1998,7 +1997,8 @@
 		m_aSkill[i].dwCooltime = 0;

 	}

 

-	ITEM_MANAGER::Instance().RemoveItem(pDeleteAllSkillItem);

+	// M2_DESTROY_ITEM(pDeleteAllSkillItem);

+	ITEM_MANAGER::instance().RemoveItem(pDeleteAllSkillItem);

 

 	RefreshAutoSkillFlag();

 	UpdateSkillPacket();

@@ -2038,7 +2038,8 @@
 		return false;

 

 	const BYTE bSkillLevel = GetSkillLevelBySlot(iSkillSlot);

-	const DWORD dwPetLevel = GetPetPoint(POINT_UPBRINGING_PET_LEVEL) - 81;

+	const int __petLevelRaw = (int)GetPetPoint(POINT_UPBRINGING_PET_LEVEL);

+	const DWORD dwPetLevel = (__petLevelRaw > 81) ? (DWORD)(__petLevelRaw - 81) : 0;

 	pSkillPoly->SetVar("lv", dwPetLevel);

 	pSkillPoly->SetVar("k", bSkillLevel);

 	const WORD wSkillValue = (WORD)pSkillPoly->Eval();

@@ -2096,7 +2097,7 @@
 			{

 				m_pOwner->PointChange(POINT_HP, wSkillValue);

 				m_pOwner->EffectPacket(SE_HPUP_RED);

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s skill activated. HP restored by %d."), pSkillProto->szName, wSkillValue);

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s skill activated. HP restored by %d.", pSkillProto->szName, wSkillValue);

 			} break;

 

 			case PET_SKILL_AFFECT_INVINCIBILITY:

@@ -2108,13 +2109,13 @@
 				info->ch = m_pOwner;

 

 				event_create(invincible_skill_end_event, info, PASSES_PER_SEC(fInvincibleTime));

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s skill activated. You will now receive no damage."), pSkillProto->szName);

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s skill activated. You will now receive no damage.", pSkillProto->szName);

 			} break;

 

 			case PET_SKILL_AFFECT_REMOVAL:

 			{

 				m_pOwner->RemoveBadAffect();

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s skill activated. Slow, poison and bleeding effects were removed."), pSkillProto->szName);

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s skill activated. Slow, poison and bleeding effects were removed.", pSkillProto->szName);

 			} break;

 

 			case PET_SKILL_FEATHER:

@@ -2131,7 +2132,7 @@
 

 				m_pFeatherSkillEvent = event_create(feather_skill_event, info, PASSES_PER_SEC(1));

 

-				m_pOwner->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s's pet skill has been activated. %s uses Feather Walk."), m_pOwner->GetName() , m_strName.c_str());

+				m_pOwner->ChatPacket(CHAT_TYPE_INFO, "%s's pet skill has been activated. %s uses Feather Walk.", m_pOwner->GetName() , m_strName.c_str());

 			} break;

 		}

 	}

@@ -2220,17 +2221,14 @@
 

 CGrowthPetManager::~CGrowthPetManager()

 {

-	if (m_growthPetSkillMap.size())

-	{

-		auto it = m_growthPetSkillMap.begin();

-

-		while (it != m_growthPetSkillMap.end())

-		{

-			for (const auto& kv : it->second)

-				M2_DELETE(kv.second);

-

-			++it;

-		}

+	auto it = m_growthPetSkillMap.begin();

+

+	while (it != m_growthPetSkillMap.end()) 

+	{

+		for (const auto& kv : it->second)

+			M2_DELETE(kv.second);

+

+		++it;

 	}

 }

 

@@ -2298,10 +2296,10 @@
 	return it->second;

 }

 

-void CGrowthPetManager::GenerateGrowthPetProto(LPCHARACTER ch, TGrowthPet* pGrowthPetTable, LPITEM pEggItem, const char* c_szName)

-{

-	int iHatchPrice = pEggItem->GetValue(3);

-	DWORD dwUpBringingVnum = pEggItem->GetVnum() + EGG_TO_UPBRINGING_DELTA;

+void CGrowthPetManager::GenerateGrowthPetProto(LPCHARACTER ch, TGrowthPet* pGrowthPetTable, LPITEM pEgg, const char* c_szName)

+{

+	int iHatchPrice = pEgg->GetValue(3);

+	DWORD dwUpBringingVnum = pEgg->GetVnum() + EGG_TO_UPBRINGING_DELTA;

 	TPetHatch hatchTable = arPetHatchTable[dwUpBringingVnum - PET_MONKEY];

 

 	// Duration

@@ -2313,7 +2311,6 @@
 	BYTE bSkillCount = number(1, hatchTable.bMaxSKillCount);

 	if (dwUpBringingVnum == PET_EXEDYAR)

 		bSkillCount = 3;

-

 	for (int i = 0; i < bSkillCount; ++i)

 		aSkill[i].bLocked = false;

 

@@ -2334,14 +2331,15 @@
 	dwDef = number(1, 21);

 

 	ch->PointChange(POINT_GOLD, -iHatchPrice);

-	ITEM_MANAGER::Instance().RemoveItem(pEggItem, "REMOVE (EGG HATCH)");

+	//ch->PointChange(POINT_GOLD, -PET_HATCHING_MONEY);

+	ITEM_MANAGER::Instance().RemoveItem(pEgg, "REMOVE (EGG HATCH)");

+

 

 	LPITEM pUpBringingItem = ch->AutoGiveItem(dwUpBringingVnum, 1);

 

 	pUpBringingItem->SetSocket(0, time(0) + petDuration);

 	pUpBringingItem->SetSocket(1, petDuration);

 	pUpBringingItem->SetSocket(2, pUpBringingItem->GetID());

-	pUpBringingItem->SetSocket(3, bPetType);

 

 	// Fill pet's information table with values

 	pGrowthPetTable->dwID = pUpBringingItem->GetID();

@@ -2374,31 +2372,28 @@
 	TPacketGCPet packet;

 	packet.header = HEADER_GC_PET;

 

-	LPITEM pEggItem = ch->GetItem(Cell);

-

-	if (!pEggItem)

+	LPITEM eggItem = ch->GetItem(Cell);

+

+	if (!eggItem)

 	{

 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_TIMEOVER;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("SUBHEADER_PET_EGG_USE_FAILED_TIMEOVER"));

-		return;

-	}

-

-	if (!(pEggItem->GetType() == ITEM_PET && pEggItem->GetSubType() == PET_EGG))

+		return;

+	}

+

+	if (!(eggItem->GetType() == ITEM_PET && eggItem->GetSubType() == PET_EGG))

 	{

 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_TIMEOVER;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("SUBHEADER_PET_EGG_USE_FAILED_TIMEOVER2"));

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Type: %d, Subtype: %d"), pEggItem->GetType(), pEggItem->GetSubType());

-		return;

-	}

-

-	if (ch->GetGold() < pEggItem->GetValue(3))

+		return;

+	}

+

+	if (ch->GetGold() < eggItem->GetValue(3))

 	{

 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_TIMEOVER;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

 

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("You do not have enough Yang."));

+		ch->ChatPacket(CHAT_TYPE_INFO, "You do not have enough Yang.");

 		return;

 	}

 

@@ -2407,16 +2402,16 @@
 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_BECAUSE_NAME;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

 

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("The name entered is too short."));

-		return;

-	}

-

-	if (CBanwordManager::Instance().CheckString(c_szName, strlen(c_szName)))

+		ch->ChatPacket(CHAT_TYPE_INFO, "The name entered is too short.");

+		return;

+	}

+

+	if (CBanwordManager::instance().CheckString(c_szName, strlen(c_szName)))

 	{

 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_BECAUSE_NAME;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

 

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Please enter another name."));

+		ch->ChatPacket(CHAT_TYPE_INFO, "Please enter another name.");

 		return;

 	}

 

@@ -2425,7 +2420,7 @@
 		packet.subheader = SUBHEADER_PET_EGG_USE_FAILED_BECAUSE_NAME;

 		ch->GetDesc()->Packet(&packet, sizeof(packet));

 

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Please enter another name."));

+		ch->ChatPacket(CHAT_TYPE_INFO, "Please enter another name.");

 		return;

 	}

 

@@ -2433,33 +2428,25 @@
 	DBManager::instance().EscapeString(szNameText, sizeof(szNameText), c_szName, strlen(c_szName));

 

 	TGrowthPet petTable;

-	GenerateGrowthPetProto(ch, &petTable, pEggItem, szNameText);

+	GenerateGrowthPetProto(ch, &petTable, eggItem, szNameText);

 	if (!petTable.dwID)

-	{

-		ch->GetDesc()->Packet(&packet, sizeof(packet));

-		ch->ChatPacket(CHAT_TYPE_INFO, "1");

-		return;

-	}

-

-	LPGROWTH_PET pPet = CreateGrowthPet(ch, petTable.dwID);

-	if (!pPet)

-	{

-		ch->GetDesc()->Packet(&packet, sizeof(packet));

-		ch->ChatPacket(CHAT_TYPE_INFO, "2");

-		return;

-	}

-

-	pPet->SetGrowthPetProto(&petTable);

-	pPet->Save();

-

-	ch->SetGrowthPet(pPet);

+		return;

+

+	LPGROWTH_PET pet = CreateGrowthPet(ch, petTable.dwID);

+	if (!pet)

+		return;

+

+	pet->SetGrowthPetProto(&petTable);

+	pet->Save();

+

+	ch->SetGrowthPet(pet);

 

 	packet.subheader = SUBHEADER_PET_EGG_USE_SUCCESS;

 	ch->GetDesc()->Packet(&packet, sizeof(packet));

 

-	TItemTable* lItem = ITEM_MANAGER::Instance().GetTable(petTable.dwVnum);

+	TItemTable* lItem = ITEM_MANAGER::instance().GetTable(petTable.dwVnum);

 	if (lItem)

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("%s has hatched!"), lItem->szLocaleName);

+		ch->ChatPacket(CHAT_TYPE_INFO, "%s has hatched!", lItem->szLocaleName);

 }

 

 struct SPetPointOnType

@@ -2471,8 +2458,8 @@
 	{ "RESIST_SURA",				POINT_RESIST_SURA	},

 	{ "RESIST_ASSASSIN",			POINT_RESIST_ASSASSIN	},

 	{ "RESIST_SHAMAN",				POINT_RESIST_SHAMAN	},

-	{ "RESIST_WOLFMAN",				POINT_NONE	},

-	{ "RESIST_MAGIC_REDUCTION",		POINT_NONE	},

+	{ "RESIST_WOLFMAN",				POINT_RESIST_WOLFMAN	},

+	{ "RESIST_MAGIC_REDUCTION",		POINT_RESIST_MAGIC_REDUCTION	},

 	{ "MELEE_MAGIC_ATT_BONUS_PER",	POINT_MELEE_MAGIC_ATT_BONUS_PER	},

 	{ "ATTBONUS_MONSTER",			POINT_ATTBONUS_MONSTER	},

 	{ "PENETRATE_PCT",				POINT_PENETRATE_PCT	},

@@ -2532,7 +2519,7 @@
 	for (int i = 0; i < iSize; ++i, ++pTab)

 	{

 		CPetSkillProto* pProto = M2_NEW CPetSkillProto;

-				 

+		 

 		pProto->dwPetVnum = pTab->dwPetVnum;

 		pProto->dwSkillVnum = pTab->dwSkillVnum;

 		strlcpy(pProto->szName, pTab->szName, sizeof(pProto->szName));

@@ -2646,7 +2633,7 @@
 		}

 

 		// Insert loaded skills

-		for (const auto& pSkill : skillVec)

+		for (auto pSkill : skillVec)

 			m_growthPetSkillMap[pSkill->dwPetVnum][pSkill->dwSkillVnum] = pSkill;

 	}

 

@@ -2665,4 +2652,6 @@
 		return nullptr;

 

 	return skillIterator->second;

-}
+}

+

+#endif

--- server/server/home/metin2/Source/Server/game/src/growth_pet.h
+++ server/server/home/metin2/Source/Server/game/src/growth_pet.h
@@ -137,7 +137,7 @@
 		TPetSkill*		GetPetSkill() { return m_aSkill; }

 		

 		LPGROWTH_PET	Summon(LPITEM pSummonItem, bool bIsResummon = false);

-		void			Unsummon(bool bSetFlag = true);

+		void			Unsummon();

 		bool			IsSummoned() const	{ return 0 != m_pGrowthPet; }

 

 		/* Update Functions */


--- server/server/home/metin2/Source/Server/game/src/input.h
+++ server/server/home/metin2/Source/Server/game/src/input.h
@@ -180,18 +180,18 @@
 	void Refine(LPCHARACTER ch, const char* c_pData);

 

 #ifdef __GROWTH_PET_SYSTEM__

-	void PetHatch(LPCHARACTER ch, const char* c_pData);

-	void PetWindow(LPCHARACTER ch, const char* c_pData);

-	void PetWindowType(LPCHARACTER ch, const char* c_pData);

-	void PetFeed(LPCHARACTER ch, const char* c_pData);

-	void PetDetermine(LPCHARACTER ch, const char* c_pData);

-	void PetAttrChange(LPCHARACTER ch, const char* c_pData);

-	void PetRevive(LPCHARACTER ch, const char* c_pData);

-	void PetLearnSkill(LPCHARACTER ch, const char* c_pData);

-	void PetSkillUpgrade(LPCHARACTER ch, const char* c_pData);

-	void PetDeleteSkill(LPCHARACTER ch, const char* c_pData);

-	void PetDeleteAllSkill(LPCHARACTER ch, const char* c_pData);

-	void PetNameChange(LPCHARACTER ch, const char* c_pData);

+	void		PetHatch(LPCHARACTER ch, const char* c_pData);

+	void		PetWindow(LPCHARACTER ch, const char* c_pData);

+	void		PetWindowType(LPCHARACTER ch, const char* c_pData);

+	void		PetFeed(LPCHARACTER ch, const char* c_pData);

+	void		PetDetermine(LPCHARACTER ch, const char* c_pData);

+	void		PetAttrChange(LPCHARACTER ch, const char* c_pData);

+	void		PetRevive(LPCHARACTER ch, const char* c_pData);

+	void		PetLearnSkill(LPCHARACTER ch, const char* c_pData);

+	void		PetSkillUpgrade(LPCHARACTER ch, const char* c_pData);

+	void		PetDeleteSkill(LPCHARACTER ch, const char* c_pData);

+	void		PetDeleteAllSkill(LPCHARACTER ch, const char* c_pData);

+	void		PetNameChange(LPCHARACTER ch, const char* c_pData);

 #endif

 

 #ifdef ENABLE_EXTENDED_BATTLE_PASS


--- server/server/home/metin2/Source/Server/game/src/input_db.cpp
+++ server/server/home/metin2/Source/Server/game/src/input_db.cpp
@@ -72,7 +72,7 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	#include "safebox.h"

+	sys_log(0, "sizeof(TGrowthPetSkillTable) = %d", sizeof(TGrowthPetSkillTable));

 #endif

 

 extern BYTE g_bAuthServer;

@@ -627,7 +627,27 @@
 	sys_log(0, "sizeof(TObjectProto) = %d", sizeof(building::TObjectProto));

 	sys_log(0, "sizeof(TObject) = %d", sizeof(building::TObject));

 #ifdef __GROWTH_PET_SYSTEM__

-	sys_log(0, "sizeof(TGrowthPetSkillTable) = %d", sizeof(TGrowthPetSkillTable));

+	/*

+	* GROWTH PET SKILL

+	*/

+

+	if (decode_2bytes(data) != sizeof(TGrowthPetSkillTable))

+	{

+		sys_err("event table size error");

+		thecore_shutdown();

+		return;

+	}

+	data += 2;

+

+	size = decode_2bytes(data);

+	data += 2;

+	sys_log(0, "BOOT: GROWTH PET SKILL: %d", size);

+

+	if (size)

+	{

+		CGrowthPetManager::instance().InitializeSkill((TGrowthPetSkillTable*)data, size);

+		data += size * sizeof(TGrowthPetSkillTable);

+	}

 #endif

 	// ADMIN_MANAGER

 	sys_log(0, "sizeof(TAdminManager) = %d", sizeof(TAdminInfo));

@@ -902,27 +922,12 @@
 	}

 

 #ifdef __GROWTH_PET_SYSTEM__

-	/*

-	* GROWTH PET SKILL

-	*/

-

-	if (decode_2bytes(data) != sizeof(TGrowthPetSkillTable))

-	{

-		sys_err("growth pet table size error");

-		thecore_shutdown();

-		return;

-	}

-	data += 2;

-

-	size = decode_2bytes(data);

-	data += 2;

-	sys_log(0, "BOOT: GROWTH PET SKILL: %d", size);

-

-	if (size)

-	{

-		CGrowthPetManager::instance().InitializeSkill((TGrowthPetSkillTable*)data, size);

-		data += size * sizeof(TGrowthPetSkillTable);

-	}

+	c_pData += sizeof(TSafeboxTable) + sizeof(TPlayerItem) * p->wItemCount;

+

+	WORD dwPetCount =*(WORD*)c_pData;

+	c_pData += sizeof(WORD);

+

+	d->GetCharacter()->GetSafebox()->LoadPet(dwPetCount, (TGrowthPet*)c_pData);

 #endif

 

 	set_global_time(*(time_t*)data);

@@ -1457,12 +1462,18 @@
 	//d->GetCharacter()->LoadSafebox(p->bSize * SAFEBOX_PAGE_SIZE, p->dwGold, p->wItemCount, (TPlayerItem *) (c_pData + sizeof(TSafeboxTable)));

 	d->GetCharacter()->LoadSafebox(bSize * SAFEBOX_PAGE_SIZE, p->dwGold, p->wItemCount, (TPlayerItem*)(c_pData + sizeof(TSafeboxTable)));

 #ifdef __GROWTH_PET_SYSTEM__

-	c_pData += sizeof(TSafeboxTable) + sizeof(TPlayerItem) * p->wItemCount;

-

-	WORD dwPetCount =*(WORD*)c_pData;

-	c_pData += sizeof(WORD);

-

-	d->GetCharacter()->GetSafebox()->LoadPet(dwPetCount, (TGrowthPet*)c_pData);

+	/*

+	* GROWTH PET SKILL

+	*/

+	wSize = decode_2bytes(c_pData);

+	c_pData += 2;

+	sys_log(0, "RELOAD: Growth Pet Skill: %d", wSize);

+

+	if (wSize)

+	{

+		CGrowthPetManager::instance().InitializeSkill((TGrowthPetSkillTable*)c_pData, wSize);

+		c_pData += wSize * sizeof(TGrowthPetSkillTable);

+	}

 #endif

 }

 

@@ -2067,18 +2078,35 @@
 	}

 

 #ifdef __GROWTH_PET_SYSTEM__

-	/*

-	* GROWTH PET SKILL

-	*/

-	wSize = decode_2bytes(c_pData);

-	c_pData += 2;

-	sys_log(0, "RELOAD: Growth Pet Skill: %d", wSize);

-

-	if (wSize)

-	{

-		CGrowthPetManager::instance().InitializeSkill((TGrowthPetSkillTable*)c_pData, wSize);

-		c_pData += wSize * sizeof(TGrowthPetSkillTable);

-	}

+void CInputDB::GrowthPetLoad(LPDESC d, const char* c_pData)

+{

+	LPCHARACTER ch;

+

+	if (!d || !(ch = d->GetCharacter()))

+		return;

+

+	if (ch->IsGrowthPetLoaded())

+		return;

+

+	DWORD dwCount = decode_4bytes(c_pData);

+	c_pData += sizeof(DWORD);

+

+	sys_log(0, "GROWTH_PET_LOAD: COUNT %s %u", ch->GetName(), dwCount);

+

+	TGrowthPet* p = (TGrowthPet*)c_pData;

+

+	for (DWORD i = 0; i < dwCount; ++i, ++p)

+	{

+		LPGROWTH_PET pPet = CGrowthPetManager::Instance().CreateGrowthPet(ch, p->dwID);

+		if (pPet)

+		{

+			pPet->SetGrowthPetProto(p);

+			ch->SetGrowthPet(pPet);

+		}

+	}

+

+	ch->SetGrowthPetLoaded(true);

+}

 #endif

 

 	CMotionManager::instance().Build();

@@ -2780,9 +2808,9 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-		case HEADER_DG_GROWTH_PET_LOAD:

-			GrowthPetLoad(DESC_MANAGER::instance().FindByHandle(m_dwHandle), c_pData);

-			break;

+	case HEADER_DG_GROWTH_PET_LOAD:

+		GrowthPetLoad(DESC_MANAGER::instance().FindByHandle(m_dwHandle), c_pData);

+		break;

 #endif

 

 #ifdef __OFFLINE_SHOP__


--- server/server/home/metin2/Source/Server/game/src/input_login.cpp
+++ server/server/home/metin2/Source/Server/game/src/input_login.cpp
@@ -40,7 +40,7 @@
 #include "OfflineShop.h"

 #endif

 #ifdef __GROWTH_PET_SYSTEM__

-	#include "item_manager.h"

+	ch->SendDeadPetMessage();

 #endif

 

 static void _send_bonus_info(LPCHARACTER ch)

@@ -969,26 +969,12 @@
 		}

 	}

 #ifdef __GROWTH_PET_SYSTEM__

-	if (!IS_BLOCKED_PET(ch->GetMapIndex()))

-	{

-		DWORD growthPetID = ch->GetQuestFlag("system.grow_pet_summoned");

-		if (growthPetID)

-		{

-			LPITEM petSeal = ITEM_MANAGER::instance().Find(growthPetID);

-			if (petSeal && petSeal->GetType() == ITEM_PET && petSeal->GetSubType() == PET_UPBRINGING)

-			{

-				LPGROWTH_PET pPet = ch->GetGrowthPet(petSeal->GetSocket(2));

-				if (pPet)

-				{

-					if (!ch->GetActiveGrowthPet())

-					{

-						LPGROWTH_PET pkPet = pPet->Summon(petSeal);

-						ch->SetActiveGrowthPet(pkPet);

-					}

-				}

-			}

-		}

-	}

+	/*

+		This packet is sent at python window initialization. No need

+		to update anything.

+	*/

+	case HEADER_CG_PET_WINDOW_TYPE:

+		break;

 #endif

 }

 


--- server/server/home/metin2/Source/Server/game/src/input_main.cpp
+++ server/server/home/metin2/Source/Server/game/src/input_main.cpp
@@ -4750,53 +4750,274 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-		case HEADER_CG_PET_HATCH:

-			PetHatch(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_WINDOW:

-			PetWindow(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_WINDOW_TYPE:

-			PetWindowType(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_NAME_CHANGE:

-			PetNameChange(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_FEED:

-			PetFeed(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_DETERMINE:

-			PetDetermine(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_ATTR_CHANGE:

-			PetAttrChange(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_REVIVE:

-			PetRevive(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_LEARN_SKILL:

-			PetLearnSkill(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_SKILL_UPGRADE:

-			PetSkillUpgrade(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_DELETE_SKILL:

-			PetDeleteSkill(ch, c_pData);

-			break;

-

-		case HEADER_CG_PET_DELETE_ALL_SKILL:

-			PetDeleteAllSkill(ch, c_pData);

-			break;

+void CInputMain::PetHatch(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetHatch* p = reinterpret_cast<const TPacketCGPetHatch*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						CGrowthPetManager::Instance().EggHatch(ch, p->name, p->eggPos);

+}

+

+void CInputMain::PetWindow(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetWindow* p = reinterpret_cast<const TPacketCGPetWindow*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	switch (p->window)

+	{

+		case PET_WINDOW_HATCH:

+			ch->SetPetHatchWindow(p->state);

+			break;

+

+		case PET_WINDOW_NAME_CHANGE:

+			ch->SetPetChangeNameWindow(p->state);

+			break;

+	}

+}

+

+void CInputMain::PetWindowType(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetWindowType* p = reinterpret_cast<const TPacketCGPetWindowType*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	BYTE bWindowType = p->type;

+

+	if (bWindowType == ch->GetPetWindowType())

+		return;

+

+	if (bWindowType == PET_WINDOW_ATTR_CHANGE || bWindowType == PET_WINDOW_PRIMIUM_FEEDSTUFF)

+	{

+

+		if ((ch->GetExchange() || ch->IsOpenSafebox() || ch->GetShopOwner()) || ch->IsCubeOpen())

+			return;

+	}

+

+	ch->SetPetWindowType(bWindowType);

+

+	TPacketGCPet packet;

+	packet.header = HEADER_GC_PET;

+	packet.subheader = SUBHEADER_PET_WINDOW_TYPE_INFO + bWindowType;

+

+	ch->GetDesc()->Packet(&packet, sizeof(packet));

+}

+

+void CInputMain::PetFeed(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetFeed* p = reinterpret_cast<const TPacketCGPetFeed*>(c_pData);

+	

+	if (!ch || !ch->GetDesc())

+		return;

+

+	if (ch->GetActiveGrowthPet())

+		if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->Feed(p);

+	else

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+}

+

+void CInputMain::PetDetermine(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetDetermine* p = reinterpret_cast<const TPacketCGPetDetermine*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pDetermineItem = ch->GetInventoryItem(p->determinePos.cell);

+	if (!pDetermineItem)

+		return;

+

+	if (pDetermineItem->GetType() != ITEM_PET || pDetermineItem->GetSubType() != PET_ATTR_DETERMINE)

+		return;

+

+	if (!ch->GetActiveGrowthPet())

+	{

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+		return;

+	}

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->AttrDetermine(pDetermineItem);

+}

+

+void CInputMain::PetAttrChange(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetAttrChange* p = reinterpret_cast<const TPacketCGPetAttrChange*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

+	if (!pUpBringingItem)

+		return;

+

+	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

+		return;

+

+	LPITEM pChangeAttrItem = ch->GetInventoryItem(p->attrChangePos.cell);

+	if (!pChangeAttrItem)

+		return;

+

+	if (pChangeAttrItem->GetType() != ITEM_PET || pChangeAttrItem->GetSubType() != PET_ATTR_CHANGE)

+		return;

+

+	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

+	if (!pPet)

+		return;

+

+	pPet->AttrChange(pUpBringingItem, pChangeAttrItem);

+}

+

+void CInputMain::PetRevive(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetRevive* p = reinterpret_cast<const TPacketCGPetRevive*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

+	if (!pUpBringingItem)

+		return;

+

+	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

+		return;

+

+	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

+	if (!pPet)

+		return;

+

+	pPet->PremiumFeed(p, pUpBringingItem);

+}

+

+void CInputMain::PetLearnSkill(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetLearnSkill* p = reinterpret_cast<const TPacketCGPetLearnSkill*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pSkillBookItem = ch->GetInventoryItem(p->learnSkillPos.cell);

+	if (!pSkillBookItem)

+		return;

+

+	if (pSkillBookItem->GetType() != ITEM_PET || pSkillBookItem->GetSubType() != PET_SKILL)

+		return;

+

+	if (!ch->GetActiveGrowthPet())

+	{

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+		return;

+	}

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->LearnSkill(p->slotIndex, pSkillBookItem);

+}

+

+void CInputMain::PetSkillUpgrade(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetSkillUpgrade* p = reinterpret_cast<const TPacketCGPetSkillUpgrade*>(c_pData);

+

+	if (!ch->GetActiveGrowthPet())

+	{

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+		return;

+	}

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->SkillUpgrade(p->slotIndex);

+}

+

+void CInputMain::PetDeleteSkill(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetDeleteSkill* p = reinterpret_cast<const TPacketCGPetDeleteSkill*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pDeleteSkillItem = ch->GetInventoryItem(p->deleteSkillPos.cell);

+	if (!pDeleteSkillItem)

+		return;

+

+	if (pDeleteSkillItem->GetType() != ITEM_PET || pDeleteSkillItem->GetSubType() != PET_SKILL_DEL_BOOK)

+		return;

+

+	if (!ch->GetActiveGrowthPet())

+	{

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+		return;

+	}

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->DeleteSkill(p->slotIndex, pDeleteSkillItem);

+}

+

+void CInputMain::PetDeleteAllSkill(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetDeleteAllSkill* p = reinterpret_cast<const TPacketCGPetDeleteAllSkill*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pDeleteAllSkillItem = ch->GetInventoryItem(p->deleteAllSkillPos.cell);

+	if (!pDeleteAllSkillItem)

+		return;

+

+	if (pDeleteAllSkillItem->GetType() != ITEM_PET || pDeleteAllSkillItem->GetSubType() != PET_SKILL_ALL_DEL_BOOK)

+		return;

+

+	if (!ch->GetActiveGrowthPet())

+	{

+		ch->ChatPacket(CHAT_TYPE_INFO, "Activate your pet first.");

+		return;

+	}

+

+	if (!ch->CheckGrowthPetFlood())

+						break;

+						ch->GetActiveGrowthPet()->DeleteAllSkill(pDeleteAllSkillItem);

+}

+

+void CInputMain::PetNameChange(LPCHARACTER ch, const char* c_pData)

+{

+	const TPacketCGPetNameChange* p = reinterpret_cast<const TPacketCGPetNameChange*>(c_pData);

+

+	if (!ch || !ch->GetDesc())

+		return;

+

+	LPITEM pNameChangeItem = ch->GetInventoryItem(p->changeNamePos.cell);

+	if (!pNameChangeItem)

+		return;

+

+	if (pNameChangeItem->GetType() != ITEM_PET || pNameChangeItem->GetSubType() != PET_NAME_CHANGE)

+		return;

+

+	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

+	if (!pUpBringingItem)

+		return;

+

+	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

+		return;

+

+	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

+	if (!pPet)

+		return;

+

+	if (pPet->GetOwner() != ch)

+		return;

+

+	pPet->NameChange(p->name, pNameChangeItem, pUpBringingItem);

+}

 #endif

 

 		case HEADER_CG_QUICKSLOT_ADD:

@@ -5309,260 +5530,53 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-void CInputMain::PetHatch(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetHatch* p = reinterpret_cast<const TPacketCGPetHatch*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-	

-	CGrowthPetManager::Instance().EggHatch(ch, p->name, p->eggPos);

-}

-

-void CInputMain::PetWindow(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetWindow* p = reinterpret_cast<const TPacketCGPetWindow*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	switch (p->window)

-	{

-		case PET_WINDOW_HATCH:

-			ch->SetPetHatchWindow(p->state);

-			break;

-

-		case PET_WINDOW_NAME_CHANGE:

-			ch->SetPetChangeNameWindow(p->state);

-			break;

-	}

-}

-

-void CInputMain::PetWindowType(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetWindowType* p = reinterpret_cast<const TPacketCGPetWindowType*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	BYTE bWindowType = p->type;

-

-	if (bWindowType == ch->GetPetWindowType())

-		return;

-

-	if (bWindowType == PET_WINDOW_ATTR_CHANGE || bWindowType == PET_WINDOW_PRIMIUM_FEEDSTUFF)

-	{

-

-		if ((ch->GetExchange() || ch->IsOpenSafebox() || ch->GetShopOwner()) || ch->IsCubeOpen())

-			return;

-	}

-

-	ch->SetPetWindowType(bWindowType);

-

-	TPacketGCPet packet;

-	packet.header = HEADER_GC_PET;

-	packet.subheader = SUBHEADER_PET_WINDOW_TYPE_INFO + bWindowType;

-

-	ch->GetDesc()->Packet(&packet, sizeof(packet));

-}

-

-void CInputMain::PetFeed(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetFeed* p = reinterpret_cast<const TPacketCGPetFeed*>(c_pData);

-	

-	if (!ch || !ch->GetDesc())

-		return;

-

-	if (ch->GetActiveGrowthPet())

-		ch->GetActiveGrowthPet()->Feed(p);

-	else

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-}

-

-void CInputMain::PetDetermine(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetDetermine* p = reinterpret_cast<const TPacketCGPetDetermine*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pDetermineItem = ch->GetInventoryItem(p->determinePos.cell);

-	if (!pDetermineItem)

-		return;

-

-	if (pDetermineItem->GetType() != ITEM_PET || pDetermineItem->GetSubType() != PET_ATTR_DETERMINE)

-		return;

-

-	if (!ch->GetActiveGrowthPet())

-	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-		return;

-	}

-

-	ch->GetActiveGrowthPet()->AttrDetermine(pDetermineItem);

-}

-

-void CInputMain::PetAttrChange(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetAttrChange* p = reinterpret_cast<const TPacketCGPetAttrChange*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

-	if (!pUpBringingItem)

-		return;

-

-	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

-		return;

-

-	LPITEM pChangeAttrItem = ch->GetInventoryItem(p->attrChangePos.cell);

-	if (!pChangeAttrItem)

-		return;

-

-	if (pChangeAttrItem->GetType() != ITEM_PET || pChangeAttrItem->GetSubType() != PET_ATTR_CHANGE)

-		return;

-

-	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

-	if (!pPet)

-		return;

-

-	pPet->AttrChange(pUpBringingItem, pChangeAttrItem);

-}

-

-void CInputMain::PetRevive(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetRevive* p = reinterpret_cast<const TPacketCGPetRevive*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

-	if (!pUpBringingItem)

-		return;

-

-	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

-		return;

-

-	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

-	if (!pPet)

-		return;

-

-	pPet->PremiumFeed(p, pUpBringingItem);

-}

-

-void CInputMain::PetLearnSkill(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetLearnSkill* p = reinterpret_cast<const TPacketCGPetLearnSkill*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pSkillBookItem = ch->GetInventoryItem(p->learnSkillPos.cell);

-	if (!pSkillBookItem)

-		return;

-

-	if (pSkillBookItem->GetType() != ITEM_PET || pSkillBookItem->GetSubType() != PET_SKILL)

-		return;

-

-	if (!ch->GetActiveGrowthPet())

-	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-		return;

-	}

-

-	ch->GetActiveGrowthPet()->LearnSkill(p->slotIndex, pSkillBookItem);

-}

-

-void CInputMain::PetSkillUpgrade(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetSkillUpgrade* p = reinterpret_cast<const TPacketCGPetSkillUpgrade*>(c_pData);

-

-	if (!ch->GetActiveGrowthPet())

-	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-		return;

-	}

-

-	ch->GetActiveGrowthPet()->SkillUpgrade(p->slotIndex);

-}

-

-void CInputMain::PetDeleteSkill(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetDeleteSkill* p = reinterpret_cast<const TPacketCGPetDeleteSkill*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pDeleteSkillItem = ch->GetInventoryItem(p->deleteSkillPos.cell);

-	if (!pDeleteSkillItem)

-		return;

-

-	if (pDeleteSkillItem->GetType() != ITEM_PET || pDeleteSkillItem->GetSubType() != PET_SKILL_DEL_BOOK)

-		return;

-

-	if (!ch->GetActiveGrowthPet())

-	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-		return;

-	}

-

-	ch->GetActiveGrowthPet()->DeleteSkill(p->slotIndex, pDeleteSkillItem);

-}

-

-void CInputMain::PetDeleteAllSkill(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetDeleteAllSkill* p = reinterpret_cast<const TPacketCGPetDeleteAllSkill*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pDeleteAllSkillItem = ch->GetInventoryItem(p->deleteAllSkillPos.cell);

-	if (!pDeleteAllSkillItem)

-		return;

-

-	if (pDeleteAllSkillItem->GetType() != ITEM_PET || pDeleteAllSkillItem->GetSubType() != PET_SKILL_ALL_DEL_BOOK)

-		return;

-

-	if (!ch->GetActiveGrowthPet())

-	{

-		ch->ChatPacket(CHAT_TYPE_INFO, LC_STRING("Activate your pet first."));

-		return;

-	}

-

-	ch->GetActiveGrowthPet()->DeleteAllSkill(pDeleteAllSkillItem);

-}

-

-void CInputMain::PetNameChange(LPCHARACTER ch, const char* c_pData)

-{

-	const TPacketCGPetNameChange* p = reinterpret_cast<const TPacketCGPetNameChange*>(c_pData);

-

-	if (!ch || !ch->GetDesc())

-		return;

-

-	LPITEM pNameChangeItem = ch->GetInventoryItem(p->changeNamePos.cell);

-	if (!pNameChangeItem)

-		return;

-

-	if (pNameChangeItem->GetType() != ITEM_PET || pNameChangeItem->GetSubType() != PET_NAME_CHANGE)

-		return;

-

-	LPITEM pUpBringingItem = ch->GetInventoryItem(p->upBringingPos.cell);

-	if (!pUpBringingItem)

-		return;

-

-	if (pUpBringingItem->GetType() != ITEM_PET || pUpBringingItem->GetSubType() != PET_UPBRINGING)

-		return;

-

-	LPGROWTH_PET pPet = ch->GetGrowthPet(pUpBringingItem->GetSocket(2));

-	if (!pPet)

-		return;

-

-	if (pPet->GetOwner() != ch)

-		return;

-

-	pPet->NameChange(p->name, pNameChangeItem, pUpBringingItem);

-}

+	case HEADER_CG_PET_HATCH:

+		PetHatch(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_WINDOW:

+		PetWindow(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_WINDOW_TYPE:

+		PetWindowType(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_NAME_CHANGE:

+		PetNameChange(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_FEED:

+		PetFeed(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_DETERMINE:

+		PetDetermine(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_ATTR_CHANGE:

+		PetAttrChange(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_REVIVE:

+		PetRevive(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_LEARN_SKILL:

+		PetLearnSkill(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_SKILL_UPGRADE:

+		PetSkillUpgrade(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_DELETE_SKILL:

+		PetDeleteSkill(ch, c_pData);

+		break;

+

+	case HEADER_CG_PET_DELETE_ALL_SKILL:

+		PetDeleteAllSkill(ch, c_pData);

+		break;

 #endif

 

 int CInputDead::Analyze(LPDESC d, BYTE bHeader, const char* c_pData)


--- server/server/home/metin2/Source/Server/game/src/item.cpp
+++ server/server/home/metin2/Source/Server/game/src/item.cpp
@@ -1981,12 +1981,12 @@
 			}

 		}

 

+

 		if (IS_SET(item->GetAntiFlag(), ITEM_ANTIFLAG_RT_REMOVE))

 		{

 			item->StopRealTimeExpireEvent();

 			return 0;

 		}

-

 #endif

 		ITEM_MANAGER::instance().RemoveItem(item, "REAL_TIME_EXPIRE");

 		return 0;

@@ -1995,7 +1995,7 @@
 	return PASSES_PER_SEC(1);

 }

 

-#if defined(__GROWTH_PET_SYSTEM__)

+#ifdef __GROWTH_PET_SYSTEM__

 void CItem::StopRealTimeExpireEvent()

 {

 	if (!m_pkRealTimeExpireEvent)


--- server/server/home/metin2/Source/Server/game/src/item.h
+++ server/server/home/metin2/Source/Server/game/src/item.h
@@ -273,7 +273,7 @@
 

 	void StartRealTimeExpireEvent();

 #if defined(__GROWTH_PET_SYSTEM__)

-	void StopRealTimeExpireEvent();

+	bool IsGrowthPet() { return GetType() == ITEM_PET && GetSubType() == PET_UPBRINGING; }

 #endif

 	bool IsRealTimeItem();

 	bool IsUsedTimeItem();


--- server/server/home/metin2/Source/Server/game/src/packet.h
+++ server/server/home/metin2/Source/Server/game/src/packet.h
@@ -49,18 +49,18 @@
 	//HEADER_CG_UNUSED = 34,

 

 #ifdef __GROWTH_PET_SYSTEM__

-	HEADER_CG_PET_HATCH = 35,

-	HEADER_CG_PET_WINDOW_TYPE = 36,

-	HEADER_CG_PET_WINDOW = 37,

-	HEADER_CG_PET_NAME_CHANGE = 38,

-	HEADER_CG_PET_FEED = 39,

-	HEADER_CG_PET_DETERMINE = 40,

-	HEADER_CG_PET_ATTR_CHANGE = 41,

-	HEADER_CG_PET_REVIVE = 42,

-	HEADER_CG_PET_LEARN_SKILL = 43,

-	HEADER_CG_PET_SKILL_UPGRADE = 44,

-	HEADER_CG_PET_DELETE_SKILL = 45,

-	HEADER_CG_PET_DELETE_ALL_SKILL = 46,

+	HEADER_CG_PET_HATCH = 118,

+	HEADER_CG_PET_WINDOW_TYPE = 119,

+	HEADER_CG_PET_WINDOW = 120,

+	HEADER_CG_PET_NAME_CHANGE = 121,

+	HEADER_CG_PET_FEED = 122,

+	HEADER_CG_PET_DETERMINE = 123,

+	HEADER_CG_PET_ATTR_CHANGE = 124,

+	HEADER_CG_PET_REVIVE = 125,

+	HEADER_CG_PET_LEARN_SKILL = 126,

+	HEADER_CG_PET_SKILL_UPGRADE = 127,

+	HEADER_CG_PET_DELETE_SKILL = 128,

+	HEADER_CG_PET_DELETE_ALL_SKILL = 129,

 #endif

 

 #if defined(__EXTEND_INVEN_SYSTEM__)

@@ -607,17 +607,17 @@
 #endif

 

 #ifdef __GROWTH_PET_SYSTEM__

-	HEADER_GC_PET = 188,

-	HEADER_GC_PET_SET = 189,

-	HEADER_GC_PET_SET_EXCHANGE = 190,

-	HEADER_GC_PET_DEL = 191,

-	HEADER_GC_PET_SUMMON = 192,

-	HEADER_GC_PET_POINT_CHANGE = 193,

-	HEADER_GC_PET_NAME_CHANGE_RESULT = 194,

-	HEADER_GC_PET_DETERMINE_RESULT = 195,

-	HEADER_GC_PET_ATTR_CHANGE_RESULT = 196,

-	HEADER_GC_PET_SKILL_UPDATE = 197,

-	HEADER_GC_PET_SKILL_COOLTIME = 198,

+	HEADER_GC_PET = 158,

+	HEADER_GC_PET_SET = 159,

+	HEADER_GC_PET_SET_EXCHANGE = 160,

+	HEADER_GC_PET_DEL = 161,

+	HEADER_GC_PET_SUMMON = 162,

+	HEADER_GC_PET_POINT_CHANGE = 163,

+	HEADER_GC_PET_NAME_CHANGE_RESULT = 164,

+	HEADER_GC_PET_DETERMINE_RESULT = 165,

+	HEADER_GC_PET_ATTR_CHANGE_RESULT = 166,

+	HEADER_GC_PET_SKILL_UPDATE = 167,

+	HEADER_GC_PET_SKILL_COOLTIME = 168,

 #endif

 

 	//HEADER_GC_UNUSED = 199,

@@ -1449,7 +1449,7 @@
 	BYTE bGuildLeaderGrade;

 #endif

 #ifdef __GROWTH_PET_SYSTEM__

-	BYTE bCharacterSize;

+	BYTE	bCharacterSize;

 #endif

 #if defined(__MULTI_LANGUAGE_SYSTEM__)

 	char szCountry[COUNTRY_NAME_MAX_LEN + 1];


--- server/server/home/metin2/Source/Server/game/src/shop_manager.cpp
+++ server/server/home/metin2/Source/Server/game/src/shop_manager.cpp
@@ -118,17 +118,15 @@
 		return false;

 

 #ifdef __GROWTH_PET_SYSTEM__

-	/*

 	if (pkChr->GetActiveGrowthPet())

 	{

 		pkChr->ChatPacket(CHAT_TYPE_INFO, "You cannot open a private shop whilst summoning your pet.");

 		return false;

 	}

-	*/

 	

 	if (pkChr->GetPetWindowType() == PET_WINDOW_ATTR_CHANGE || pkChr->GetPetWindowType() == PET_WINDOW_PRIMIUM_FEEDSTUFF)

 	{

-		pkChr->ChatPacket(CHAT_TYPE_INFO, LC_STRING("While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc."));

+		pkChr->ChatPacket(CHAT_TYPE_INFO, "While modifying your pet's stats, you cannot trade, sell items, use the storeroom etc.");

 		return false;

 	}

 #endif


--- sql.sql
+++ sql.sql
@@ -2425,36 +2425,60 @@
 -- Table structure for table `growth_pet`

 --

 

+

+-- --- Growth Pet System (replaced) ---

+/*

+ Navicat MySQL Data Transfer

+

+ Source Server         : Dev_locale

+ Source Server Type    : MySQL

+ Source Server Version : 80027

+ Source Host           : 127.0.0.1:3306

+ Source Schema         : player

+

+ Target Server Type    : MySQL

+ Target Server Version : 80027

+ File Encoding         : 65001

+

+ Date: 16/04/2022 10:56:57

+*/

+

+SET NAMES utf8mb4;

+SET FOREIGN_KEY_CHECKS = 0;

+

+-- ----------------------------

+-- Table structure for growth_pet

+-- ----------------------------

 DROP TABLE IF EXISTS `growth_pet`;

-/*!40101 SET @saved_cs_client     = @@character_set_client */;

-/*!50503 SET character_set_client = utf8mb4 */;

-CREATE TABLE `growth_pet` (

-  `id` int NOT NULL,

-  `owner_id` int NOT NULL,

-  `vnum` int NOT NULL,

-  `state` enum('UPBRINGING','BAG','SAFEBOX') NOT NULL DEFAULT 'UPBRINGING',

-  `name` varchar(20) DEFAULT NULL,

-  `size` tinyint NOT NULL DEFAULT '0',

-  `level` int NOT NULL DEFAULT '1',

-  `level_step` tinyint NOT NULL DEFAULT '0',

-  `evolution` tinyint NOT NULL DEFAULT '1',

-  `type` tinyint DEFAULT NULL,

-  `hp` int NOT NULL DEFAULT '0',

-  `sp` int NOT NULL DEFAULT '0',

-  `def` int NOT NULL DEFAULT '0',

-  `hp_apply` tinyint NOT NULL DEFAULT '0',

-  `sp_apply` tinyint NOT NULL DEFAULT '0',

-  `def_apply` tinyint NOT NULL DEFAULT '0',

-  `age_apply` tinyint NOT NULL DEFAULT '0',

-  `skill_level` blob,

-  `exp` int NOT NULL DEFAULT '0',

-  `item_exp` int NOT NULL DEFAULT '0',

-  `birthday` datetime DEFAULT NULL,

-  `end_time` int NOT NULL DEFAULT '0',

-  `max_time` int NOT NULL DEFAULT '0',

-  PRIMARY KEY (`id`),

-  KEY `idx_owner_id` (`owner_id`)

-) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

+CREATE TABLE `growth_pet`  (

+  `id` int(0) NOT NULL,

+  `owner_id` int(0) NOT NULL,

+  `vnum` int(0) NOT NULL,

+  `state` enum('UPBRINGING','BAG','SAFEBOX') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT 'UPBRINGING',

+  `name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,

+  `size` tinyint(0) NOT NULL,

+  `level` int(0) NULL DEFAULT 1,

+  `level_step` tinyint(1) NULL DEFAULT 0,

+  `evolution` tinyint(1) NULL DEFAULT 1,

+  `type` tinyint(1) NULL DEFAULT NULL,

+  `hp` int(0) NULL DEFAULT 0,

+  `sp` int(0) NULL DEFAULT 0,

+  `def` int(0) NULL DEFAULT 0,

+  `hp_apply` tinyint(0) NULL DEFAULT 0,

+  `sp_apply` tinyint(0) NULL DEFAULT 0,

+  `def_apply` tinyint(0) NULL DEFAULT 0,

+  `age_apply` tinyint(0) NULL DEFAULT 0,

+  `skill_level` tinyblob NULL,

+  `exp` int(0) NULL DEFAULT NULL,

+  `item_exp` int(0) NULL DEFAULT NULL,

+  `birthday` datetime(0) NULL DEFAULT NULL,

+  `end_time` int(0) NULL DEFAULT 0,

+  `max_time` int(0) NULL DEFAULT NULL,

+  PRIMARY KEY (`id`) USING BTREE

+) ENGINE = MyISAM AUTO_INCREMENT = 1 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = Dynamic;

+

+SET FOREIGN_KEY_CHECKS = 1;

+

 /*!40101 SET character_set_client = @saved_cs_client */;

 

 --

@@ -2470,29 +2494,311 @@
 -- Table structure for table `growth_pet_skill_proto`

 --

 

+

+-- --- Growth Pet System (replaced) ---

+/*

+ Navicat MySQL Data Transfer

+

+ Source Server         : Dev_locale

+ Source Server Type    : MySQL

+ Source Server Version : 80027

+ Source Host           : 127.0.0.1:3306

+ Source Schema         : player

+

+ Target Server Type    : MySQL

+ Target Server Version : 80027

+ File Encoding         : 65001

+

+ Date: 16/04/2022 10:56:57

+*/

+

+SET NAMES utf8mb4;

+SET FOREIGN_KEY_CHECKS = 0;

+

+-- ----------------------------

+-- Table structure for growth_pet_skill_proto

+-- ----------------------------

 DROP TABLE IF EXISTS `growth_pet_skill_proto`;

-/*!40101 SET @saved_cs_client     = @@character_set_client */;

-/*!50503 SET character_set_client = utf8mb4 */;

-CREATE TABLE `growth_pet_skill_proto` (

-  `dwPetVnum` int NOT NULL,

-  `dwSkillVnum` int NOT NULL,

-  `szName` varchar(32) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `bType` enum('PASSIVE','AUTO') CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `dwCooldown` int NOT NULL,

-  `setAffectFlag` enum('JIJOONG_WARRIOR','JIJOONG_SURA','JIJOONG_ASSASSIN','JIJOONG_SHAMAN','JIJOONG_WOLFMAN','PACHEON','BANYA','CHEONRYEONG','CHOEHOENBIMU','HEAL','STEALHP','STEALMP','BLOCK','REFLECT_MELEE','GOLD_DROP','BOW_DISTANCE','INVINCIBILITY','REMOVAL','POTION','MOB_BONUS','EXP','HP_RECOVER','FEATHER','STONE','BOSS','RESIST_SKILL','RESIST_DAMAGE') CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,

-  `szPointOn` enum('RESIST_WARRIOR','RESIST_SURA','RESIST_ASSASSIN','RESIST_SHAMAN','RESIST_WOLFMAN','RESIST_MAGIC_REDUCTION','MELEE_MAGIC_ATT_BONUS_PER','ATTBONUS_MONSTER','PENETRATE_PCT','CASTING_SPEED','BOW_DISTANCE','STEAL_SP','STEAL_HP','KILL_HP_RECOVERY','BLOCK','REFLECT_MELEE','GOLD_DOUBLE_BONUS','EXP_DOUBLE_BONUS','POTION_BONUS','STONE_BONUS','BOSS_BONUS','RESIST_SKILL','RESIST_HIT') CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,

-  `szPointPoly1` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly2` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly3` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly4` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly5` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly6` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly7` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szPointPoly8` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szActivatePctPoly` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  `szDurationPoly` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,

-  PRIMARY KEY (`dwPetVnum`,`dwSkillVnum`) USING BTREE

-) ENGINE=MyISAM DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

+CREATE TABLE `growth_pet_skill_proto`  (

+  `dwPetVnum` int(11) NOT NULL,

+  `dwSkillVnum` int(11) NOT NULL,

+  `szName` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `bType` enum('PASSIVE','AUTO') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `dwCooldown` int(3) NOT NULL,

+  `setAffectFlag` enum('JIJOONG_WARRIOR','JIJOONG_SURA','JIJOONG_ASSASSIN','JIJOONG_SHAMAN','JIJOONG_WOLFMAN','PACHEON','BANYA','CHEONRYEONG','CHOEHOENBIMU','HEAL','STEALHP','STEALMP','BLOCK','REFLECT_MELEE','GOLD_DROP','BOW_DISTANCE','INVINCIBILITY','REMOVAL','POTION','MOB_BONUS','EXP','HP_RECOVER','FEATHER','') CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,

+  `szPointOn` enum('RESIST_WARRIOR','RESIST_SURA','RESIST_ASSASSIN','RESIST_SHAMAN','RESIST_WOLFMAN','RESIST_MAGIC_REDUCTION','MELEE_MAGIC_ATT_BONUS_PER','ATTBONUS_MONSTER','PENETRATE_PCT','CASTING_SPEED','BOW_DISTANCE','STEAL_SP','STEAL_HP','KILL_HP_RECOVERY','BLOCK','REFLECT_MELEE','GOLD_DOUBLE_BONUS','EXP_DOUBLE_BONUS','POTION_BONUS') CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,

+  `szPointPoly1` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly2` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly3` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly4` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly5` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly6` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly7` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szPointPoly8` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szActivatePctPoly` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  `szDurationPoly` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,

+  PRIMARY KEY (`dwPetVnum`, `dwSkillVnum`) USING BTREE

+) ENGINE = MyISAM CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

+

+-- ----------------------------

+-- Records of growth_pet_skill_proto

+-- ----------------------------

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.8 + (k*3.402 + lv*1.215)', '10.8 + (k*3.402 + lv*1.215)', '11.2 + (k*3.528 + lv*1.26)', '11.2 + (k*3.528 + lv*1.26)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55701, 23, 'Light as a Feather', 'AUTO', 10, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55702, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55703, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55704, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '162.5 + (k*5.6875 + lv*2.03125)', '162.5 + (k*5.6875 + lv*2.03125)', '262.5 + (k*9.1875 + lv*3.28125)', '262.5 + (k*9.1875 + lv*3.28125)', '337.5 + (k*11.8125 + lv*4.21875)', '337.5 + (k*11.8125 + lv*4.21875)', '387.5 + (k*13.5625 + lv*4.84375)', '387.5 + (k*13.5625 + lv*4.84375)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55705, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.63 + lv*0.225)', '1 + (k*0.63 + lv*0.225)', '1 + (k*0.665 + lv*0.2375)', '1 + (k*0.665 + lv*0.2375)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '733.3 + (k*230.99 + lv*82.4963)', '733.3 + (k*230.99 + lv*82.4963)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.28 + lv*0.1)', '1 + (k*0.28 + lv*0.1)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55706, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '706.6 + (k*222.579 + lv*79.4925)', '706.6 + (k*222.579 + lv*79.4925)', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55707, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.525 + lv*0.1875)', '1 + (k*0.525 + lv*0.1875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55708, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.8 + (k*3.402 + lv*1.215)', '10.8 + (k*3.402 + lv*1.215)', '11.2 + (k*3.528 + lv*1.26)', '11.2 + (k*3.528 + lv*1.26)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55709, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '187.5 + (k*6.5625 + lv*2.34375)', '187.5 + (k*6.5625 + lv*2.34375)', '287.5 + (k*10.0625 + lv*3.59375)', '287.5 + (k*10.0625 + lv*3.59375)', '287.5 + (k*10.0625 + lv*3.59375)', '387.5 + (k*13.5625 + lv*4.84375)', '387.5 + (k*13.5625 + lv*4.84375)', '387.5 + (k*13.5625 + lv*4.84375)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.63 + lv*0.225)', '1 + (k*0.63 + lv*0.225)', '1 + (k*0.665 + lv*0.2375)', '1 + (k*0.665 + lv*0.2375)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '1 + (k*0.735 + lv*0.2625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '713.3 + (k*224.689 + lv*80.2463)', '713.3 + (k*224.689 + lv*80.2463)', '720 + (k*226.8 + lv*81)', '720 + (k*226.8 + lv*81)', '733.3 + (k*230.99 + lv*82.4963)', '720 + (k*226.8 + lv*81)', '733.3 + (k*230.99 + lv*82.4963)', '720 + (k*226.8 + lv*81)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '1 + (k*0.49 + lv*0.175)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '10.6 + (k*3.339 + lv*1.1925)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.63 + lv*0.225)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.665 + lv*0.2375)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '10 + (k*0.7 + lv*0.25)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.28 + lv*0.1)', '1 + (k*0.28 + lv*0.1)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55710, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '150 + (k*5.25 + lv*1.875)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 1, 'Resistance (Warrior)', 'PASSIVE', 0, 'JIJOONG_WARRIOR', 'RESIST_WARRIOR', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 2, 'Resistance (Sura)', 'PASSIVE', 0, 'JIJOONG_SURA', 'RESIST_SURA', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 3, 'Resistance (Ninja)', 'PASSIVE', 0, 'JIJOONG_ASSASSIN', 'RESIST_ASSASSIN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 4, 'Resistance (Shaman)', 'PASSIVE', 0, 'JIJOONG_SHAMAN', 'RESIST_SHAMAN', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 5, 'Resistance (Lycan)', 'PASSIVE', 0, 'JIJOONG_WOLFMAN', 'RESIST_WOLFMAN', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '1 + (k*0.455 + lv*0.1625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 6, 'Berserker', 'PASSIVE', 0, 'PACHEON', 'MELEE_MAGIC_ATT_BONUS_PER', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.35 + lv*0.125)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '1 + (k*0.42 + lv*0.15)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 7, 'Anti-Magic', 'PASSIVE', 0, 'BANYA', 'RESIST_MAGIC_REDUCTION', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 8, 'Haste', 'PASSIVE', 0, 'CHEONRYEONG', 'CASTING_SPEED', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '1 + (k*0.595 + lv*0.2125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 9, 'Drill', 'PASSIVE', 0, 'CHOEHOENBIMU', 'PENETRATE_PCT', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 10, 'Restoration', 'AUTO', 480, 'HEAL', '', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '700 + (k*220.5 + lv*78.75)', '58', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 11, 'Vampirism', 'PASSIVE', 0, 'STEALHP', 'STEAL_HP', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 12, 'Spiritualism', 'PASSIVE', 0, 'STEALMP', 'STEAL_SP', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.21 + lv*0.075)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 13, 'Bulwark', 'PASSIVE', 0, 'BLOCK', 'BLOCK', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '1 + (k*0.385 + lv*0.1375)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 14, 'Reflection', 'PASSIVE', 0, 'REFLECT_MELEE', 'REFLECT_MELEE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 15, 'Yang Drop', 'PASSIVE', 0, 'GOLD_DROP', 'GOLD_DOUBLE_BONUS', '10.8 + (k*3.402 + lv*1.215)', '10.8 + (k*3.402 + lv*1.215)', '11.2 + (k*3.528 + lv*1.26)', '11.2 + (k*3.528 + lv*1.26)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '11.6 + (k*3.654 + lv*1.305)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 16, 'Range', 'PASSIVE', 0, 'BOW_DISTANCE', 'BOW_DISTANCE', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 17, 'Immortal', 'AUTO', 600, 'INVINCIBILITY', '', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '10 + (k*0.595 + lv*0.2125)', '53', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 18, 'Panacea', 'AUTO', 480, 'REMOVAL', '', '0', '0', '0', '0', '0', '0', '0', '0', '41', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 19, 'Master Brewer', 'PASSIVE', 0, 'POTION', 'POTION_BONUS', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '1 + (k*0.315 + lv*0.1125)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 20, 'Monster Hunter', 'PASSIVE', 0, 'MOB_BONUS', 'ATTBONUS_MONSTER', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '1 + (k*0.245 + lv*0.0875)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 21, 'Eagle Eyes', 'PASSIVE', 0, 'EXP', 'EXP_DOUBLE_BONUS', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 22, 'Life Drain', 'PASSIVE', 0, 'HP_RECOVER', 'KILL_HP_RECOVERY', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '1 + (k*0.175 + lv*0.0625)', '0', '0');

+INSERT INTO `growth_pet_skill_proto` VALUES (55711, 23, 'Light as a Feather', 'AUTO', 180, 'FEATHER', '', '187.5 + (k*6.5625 + lv*2.34375)', '187.5 + (k*6.5625 + lv*2.34375)', '287.5 + (k*10.0625 + lv*3.59375)', '287.5 + (k*10.0625 + lv*3.59375)', '287.5 + (k*10.0625 + lv*3.59375)', '387.5 + (k*13.5625 + lv*4.84375)', '387.5 + (k*13.5625 + lv*4.84375)', '387.5 + (k*13.5625 + lv*4.84375)', '44+ (k*0.455 + lv*0.1625)', '50 + (k*2.8 + lv*1)');

+

+SET FOREIGN_KEY_CHECKS = 1;

+

 /*!40101 SET character_set_client = @saved_cs_client */;

 

 --


--- client/client/pack/root/game.py
+++ client/client/pack/root/game.py
@@ -597,7 +597,7 @@
 		self.pressNumber = ui.__mem_func__(self.__SelectQuickPage)

 

 	def __PressQuickSlot(self, localSlotIndex):

-		if app.ENABLE_GROWTH_PET_SYSTEM:

+	if app.ENABLE_GROWTH_PET_SYSTEM:

 			if localeInfo.IsARABIC():

 				if 0 <= localSlotIndex and localSlotIndex < 4:

 					localSlotIndex = 3 - localSlotIndex


--- client/client/pack/root/interfacemodule.py
+++ client/client/pack/root/interfacemodule.py
@@ -451,7 +451,7 @@
 		if app.ENABLE_EXTENDED_BATTLE_PASS:

 			self.wndBattlePassExtended = uiBattlePassExtended.BattlePassWindow()

 

-		if app.ENABLE_GROWTH_PET_SYSTEM:

+			if app.ENABLE_GROWTH_PET_SYSTEM:

 			self.wndPetInfoWindow = uiPetInfo.PetInformationWindow()

 			self.wndPetInfoWindow.BindInterfaceClass(self)

 			self.wndInventory.SetPetHatchingWindow(self.wndPetInfoWindow.GetPetHatchingWindow())

@@ -1964,7 +1964,7 @@
 			if self.wndRankingBoardWindow:

 				self.wndRankingBoardWindow.Open(type, category)

 

-	if app.ENABLE_GROWTH_PET_SYSTEM:

+		if app.ENABLE_GROWTH_PET_SYSTEM: 	

 		def PetInformationActivate(self):

 			self.wndExpandedTaskBar.SetToolTipText(uiTaskBar.ExpandedTaskBar.BUTTON_PET_INFO, uiScriptLocale.TASKBAR_PET_INFO)

 

@@ -2165,7 +2165,7 @@
 			if self.wndBattlePassExtended:

 				hideWindows += self.wndBattlePassExtended,

 

-		if app.ENABLE_GROWTH_PET_SYSTEM:

+	if app.ENABLE_GROWTH_PET_SYSTEM:

 			if self.wndPetInfoWindow:

 				hideWindows += self.wndPetInfoWindow,

 

@@ -2273,7 +2273,7 @@
 					chat.AppendChat(chat.CHAT_TYPE_INFO, localeInfo.AURA_OPEN_OTHER_WINDOW)

 					return

 

-			if app.ENABLE_GROWTH_PET_SYSTEM:

+		if app.ENABLE_GROWTH_PET_SYSTEM:

 				pet_id = player.GetActivePetItemId()

 				if pet_id:

 					chat.AppendChat(chat.CHAT_TYPE_INFO, localeInfo.PET_CAN_NOT_OPEN_SHOP_BECAUSE_SUMMON)

@@ -3308,7 +3308,7 @@
 			if self.wndMiniGame:

 				self.wndMiniGame.FlowerEventProcess(type, data)

 

-	if app.ENABLE_GROWTH_PET_SYSTEM:

+			if app.ENABLE_GROWTH_PET_SYSTEM:

 		def PetHatchingWindowCommand(self, command):

 			if self.wndPetInfoWindow:

 				if self.wndPetInfoWindow.wndPetHatching:


--- client/client/pack/root/uiaffectshower.py
+++ client/client/pack/root/uiaffectshower.py
@@ -1045,7 +1045,7 @@
 		except Exception, e:

 			print "AffectShower::OnUpdate error : ", e

 

-	if app.ENABLE_GROWTH_PET_SYSTEM:

+		if app.ENABLE_GROWTH_PET_SYSTEM:

 		def SetPetSkillAffect(self, index, affect):

 		

 			if self.__AppendPetSkillAffect(index, affect):


--- client/client/pack/root/uiinventory.py
+++ client/client/pack/root/uiinventory.py
@@ -1669,7 +1669,7 @@
 				else:

 					attachSlotType = player.WindowTypeToSlotType(window_type)

 

-				if app.ENABLE_GROWTH_PET_SYSTEM:

+			if app.ENABLE_GROWTH_PET_SYSTEM:

 					if self.__CanAttachGrowthPetItem(selectedItemVNum, itemSlotIndex):

 						# Substituido o 'player.SLOT_TYPE_INVENTORY' fixo por 'attachSlotType'

 						mouseModule.mouseController.AttachObject(self, attachSlotType, itemSlotIndex, selectedItemVNum, itemCount)

@@ -2156,7 +2156,7 @@
 					if self.__CanUseGemConverter(srcItemVNum, dstSlotWindow, srcSlotPos, dstSlotWindow, dstSlotPos):

 						return True

 

-			if app.ENABLE_GROWTH_PET_SYSTEM:

+		if app.ENABLE_GROWTH_PET_SYSTEM:

 				if self.__CanUseSrcPetItemToDstPetItem(srcItemVNum, srcSlotPos, dstSlotPos):

 					return True

 

@@ -2525,7 +2525,7 @@
 				self.__UseItemAcce(slotIndex, slotWindow)

 				return

 

-		if app.ENABLE_GROWTH_PET_SYSTEM:

+	if app.ENABLE_GROWTH_PET_SYSTEM:

 			itemType = item.GetItemType()

 			

 			if self.interface.wndPetInfoWindow.AttachItemToPetWindow(player.INVENTORY, player.SLOT_TYPE_INVENTORY, slotIndex):


--- client/client/pack/root/uipetinfo.py
+++ client/client/pack/root/uipetinfo.py
@@ -1,4 +1,3 @@
-# -*- coding: utf-8 -*-

 import ui

 import uiScriptLocale

 import app

@@ -9,11 +8,15 @@
 import mouseModule

 import wndMgr

 import skill

+import playerSettingModule

+import quest

 import localeInfo

 import uiToolTip

 import constInfo

+import emotion

 import chr

 import item

+import uiPrivateShopBuilder

 import chat

 import uiCommon

 import uiAffectShower

@@ -157,7 +160,7 @@
 			self.lifeTimeGauge.SetWindowHorizontalAlignLeft()

 			if localeInfo.IsARABIC():

 				self.GetChild("gauge_left").LeftRightReverse()

-				self.GetChild("gauge_right").LeftRightReverse()

+				self.GetChild("gauge_right").LeftRightReverse()				

 				

 		except:

 			import exception

@@ -215,7 +218,7 @@
 	def SetLifeTime(self, curPoint, maxPoint):

 		curPoint = min(curPoint, maxPoint)

 		if maxPoint > 0:

-			self.lifeTimeGauge.SetPercentage(curPoint, maxPoint)

+			self.lifeTimeGauge.SetPercentageWithScale(curPoint, maxPoint)

 				

 	def SetExperience(self, curPoint, maxPoint, itemExp, itemExpMax):

 		

@@ -261,23 +264,25 @@
 		if output_max_exp:

 			expPercent = float(output_cur_exp) / float(output_max_exp) * 100

 		

-		## TEXT output is based on hunting experience + item experience.

+		# If WJ_MULTI_TEXTLINE is active, experience points will be

+		# shown seperately based on type.

 		if app.WJ_MULTI_TEXTLINE:

 			if localeInfo.IsARABIC():

 				tooltip_text = str(curPoint)				+ ' :'	+ str(localeInfo.PET_INFO_EXP)			+ '\\n'	\

 							 + str(maxPoint - curPoint)		+ ' :'	+ str(localeInfo.PET_INFO_NEXT_EXP)		+ '\\n'	\

 							 + str(itemExp)					+ ' :'	+ str(localeInfo.PET_INFO_ITEM_EXP)		+ '\\n'	\

-							 + str(itemExpMax - itemExp)	+ ' :'	+ str(localeInfo.PET_INFO_NEXT_ITEM_EXP)

+							 + str(itemExpMax - itemExp)	+ ' :'	+ str(localeInfo.PET_INFO_NEXT_ITEM_EXP)	

 				self.tooltipEXP.SetText(tooltip_text)

 			else:

 				tooltip_text = str(localeInfo.PET_INFO_EXP) + ': '+ str(curPoint) + '\\n'	\

 							 + str(localeInfo.PET_INFO_NEXT_EXP) + ': ' + str(maxPoint - curPoint) + '\\n'	\

 							 + str(localeInfo.PET_INFO_ITEM_EXP) + ': '+ str(itemExp) + '\\n'	\

 							 + str(localeInfo.PET_INFO_NEXT_ITEM_EXP) + ': ' + str(itemExpMax - itemExp)

+							 

 				self.tooltipEXP.SetText(tooltip_text)

 		else:

-			self.tooltipEXP.SetText("%s : %.2f%%" % (localeInfo.TASKBAR_EXP, float(output_cur_exp) / max(1, float(output_max_exp - output_cur_exp)) * 100))

-

+			self.tooltipEXP.SetText("%s : %.2f%%" % (localeInfo.TASKBAR_EXP, expPercent))

+			

 	def OnFlashEvent(self):

 		if self.petSlotAniImg:

 			self.petSlotAniImg.Show()

@@ -526,8 +531,8 @@
 		self.hatchingSlot.SetItemSlot(0, growthPetVnum)

 		self.hatchingSlot.RefreshSlot()

 		item_string = item.GetItemName()

-		self.petName = item_string[:item.PET_NAME_MAX_SIZE]

-		self.petNameEdit.SetText(self.petName)

+		#self.petName = item_string[:item.PET_NAME_MAX_SIZE]

+		#self.petNameEdit.SetText(self.petName)

 		self.petNameEdit.SetEndPosition()

 		self.petNameEdit.SetFocus()

 		self.petNameEdit.Show()

@@ -1133,11 +1138,12 @@
 		return -1

 	

 	# Move items inside the feed window (item slot grid)

-	def ItemMoveFeedWindow(self, slotWindow, attachSlotType, slotIndex):

-		#if player.INVENTORY == slotWindow:

-		#	attachSlotType = player.SLOT_TYPE_INVENTORY

-		#else:

-		#	return False

+	def ItemMoveFeedWindow(self, slotWindow, slotIndex):

+		if player.INVENTORY == slotWindow:

+			attachSlotType = player.SLOT_TYPE_INVENTORY

+		else:

+			return False

+	

 		checkTime = app.GetGlobalTimeStamp() - self.feedButtonClickTime

 		if checkTime < 2:

 			if slotIndex in self.backupFeedItems:

@@ -1180,7 +1186,7 @@
 				if value:

 					attributeCount += 1

 					

-			if attributeCount:

+			if attributeCount >= 3:

 				self.questionDialogEmptyPos = emptySlotIndex

 				self.questionDialogItemPos = slotIndex

 				

@@ -1232,19 +1238,11 @@
 		attachedSlotType	= mouseModule.mouseController.GetAttachedType()			

 		attachedSlotPos		= mouseModule.mouseController.GetAttachedSlotNumber()

 		

-		#if player.SLOT_TYPE_INVENTORY != attachedSlotType:

-		#	return False

-		

-		if player.SLOT_TYPE_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_SKILL_BOOK_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_STONE_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_GIFT_BOX_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_SWITCH_INVENTORY == attachedSlotType or\

-				player.SLOT_TYPE_COSTUME_INVENTORY == attachedSlotType:

-

-			self.ItemMoveFeedWindow(player.INVENTORY, attachedSlotType, attachedSlotPos)

-

+		if player.SLOT_TYPE_INVENTORY != attachedSlotType:

+			return False

+		

+		self.ItemMoveFeedWindow(player.INVENTORY, attachedSlotPos)

+		

 	def InsertItemToSlot(self, slotIndex):

 		checkTime = app.GetGlobalTimeStamp() - self.feedButtonClickTime

 		if checkTime < 2:

@@ -1266,36 +1264,30 @@
 		itemSubType = item.GetItemSubType()			

 		

 		# Return if item is beging attached from not inventory window

-		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

+		if player.SLOT_TYPE_INVENTORY != attachedSlotType:

 			return False

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

 			return False

 		

 		# Return if there is no pet summoned

 		petVNum = player.GetActivePetItemVNum()

 		if 0 == petVNum:

 			return False

-

+			

 		# Return if active pet is being dragged to the window

 		if item.ITEM_TYPE_PET == itemType and itemSubType == item.PET_UPBRINGING:

 			activePetId = player.GetActivePetItemId()

 			petId = player.GetItemMetinSocket(attachedSlotPos, 2)

 			if petId == activePetId:

 				return False

-		

+				

 		# Display a msg if item type does not correspond to condtions

 		if self.wndPetInformation.CantFeedItem(attachedSlotPos):

 			chat.AppendChat(chat.CHAT_TYPE_INFO, localeInfo.PET_CAN_NOT_FEED_TYPE)

 			return False

-		

+			

 		if -1 != self.FeedItems[slotIndex]:

 			return False

 		

@@ -1427,7 +1419,6 @@
 		interface = self.wndPetInformation.interface

 		interface.SetOnTopWindow(player.ON_TOP_WND_PET_FEED)

 		interface.RefreshMarkInventoryBag()

-

 	

 """

 		PetInformationWindow is opened through taskbar or 'P' key.

@@ -1599,6 +1590,7 @@
 				

 			# Life Time Gauge

 			self.lifeTimeGauge = self.GetChild("LifeGauge")

+			self.lifeTimeGauge.SetScale(1.61, 1.0)

 			self.lifeTimeGauge.SetWindowHorizontalAlignLeft()

 			

 			if localeInfo.IsARABIC():

@@ -1681,8 +1673,7 @@
 				

 			# Determine Button

 			self.GetChild("DetermineButton").SetEvent(ui.__mem_func__(self.ClickDetermineButton))

-			# Shop Button

-

+				

 			# Attr Change Slot

 			attrChangeSlot = self.GetChild("Change_Pet_Slot")

 			attrChangeSlot.SetSelectEmptySlotEvent(ui.__mem_func__(self.SelectEmptyAttrChangeSlot))

@@ -1883,7 +1874,7 @@
 	def __OnClickTabButton(self, stateKey):

 		if stateKey == self.state:

 			return

-		

+			

 		# Update server with current opened window

 		if stateKey == player.PET_WINDOW_INFO:

 			net.SendPetWindowType(player.PET_WINDOW_INFO)

@@ -1920,7 +1911,7 @@
 		self.tabDict[stateKey].Show()

 		self.pageDict[stateKey].Show()

 		

-		if self.interface and self.IsShow():

+		if self.interface:

 			if stateKey == player.PET_WINDOW_INFO:

 				self.interface.SetOnTopWindow(player.ON_TOP_WND_NONE)

 				self.interface.RefreshMarkInventoryBag()

@@ -1939,23 +1930,11 @@
 				self.interface.SetOnTopWindow(player.ON_TOP_WND_PET_PRIMIUM_FEEDSTUFF)

 				self.interface.RefreshMarkInventoryBag()

 		

-			# Clear attr change/revive windows

-			self.__ClearAttrChangeWindow()

-			self.__ClearPetReviveWindow()

-		

-	def OnTop(self):

-		if self.state == player.PET_WINDOW_INFO:

-			self.interface.SetOnTopWindow(player.ON_TOP_WND_NONE)

-			self.interface.RefreshMarkInventoryBag()

-			

-		elif self.state == player.PET_WINDOW_ATTR_CHANGE:

-			self.interface.SetOnTopWindow(player.ON_TOP_WND_PET_ATTR_CHANGE)

-			self.interface.RefreshMarkInventoryBag()

-			

-		elif self.state == player.PET_WINDOW_PRIMIUM_FEEDSTUFF:

-			self.interface.SetOnTopWindow(player.ON_TOP_WND_PET_PRIMIUM_FEEDSTUFF)

-			self.interface.RefreshMarkInventoryBag()

-			

+		# Clear attr change/revive windows

+		self.__ClearAttrChangeWindow()

+		self.__ClearPetReviveWindow()

+		

+	

 	def GetState(self):

 		return self.state

 		

@@ -1975,7 +1954,7 @@
 		

 	def OnPressedSkill3SlotButton(self, slotIndex):

 		self.OnPressedSkillSlotButton(2, slotIndex)

-

+	

 	# Open skill upgrade question dialog, triggered from OnPressedSkillXSlotButton

 	def OnPressedSkillSlotButton(self, slotPos, slotIndex):

 		self.OpenPetSkillUpGradeQuestionDialog(slotPos, slotIndex)

@@ -2047,12 +2026,6 @@
 		

 	def SetSelectItemSlotEvent3(self, slotIndex):

 		self.SetSelectItemSlotEvent(2)

-		

-	def SetSelectItemSlotEvent4(self, slotIndex):

-		self.SetSelectItemSlotEvent(3)

-		

-	def SetSelectItemSlotEvent5(self, slotIndex):

-		self.SetSelectItemSlotEvent(4)

 

 	# Delete skill dialog, triggered from SetSelectItemSlotEventX

 	def SetSelectItemSlotEvent(self, skillSlotIndex):

@@ -2070,6 +2043,7 @@
 		

 		# Skill data

 		(skill_count, pet_skill1, pet_skill_level1, pet_skill_cool1, pet_skill2, pet_skill_level2, pet_skill_cool2, pet_skill3, pet_skill_level3, pet_skill_cool3) = player.GetPetSkill(pet_id)

+			

 		if 0 == skill_count:

 			return

 			

@@ -2085,7 +2059,7 @@
 		elif 2 == skillSlotIndex:

 			if not pet_skill3:

 				return

-

+				

 		attachedSlotType	= mouseModule.mouseController.GetAttachedType()			

 		attachedSlotPos		= mouseModule.mouseController.GetAttachedSlotNumber()

 		attachedItemCount	= mouseModule.mouseController.GetAttachedItemCount()

@@ -2097,22 +2071,21 @@
 		

 		# Return if item is not from inventory

 		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

+			(player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

-			return

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

+			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and app.ENABLE_SPECIAL_INVENTORY_SYSTEM):

+

+			return False

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

 			return

 		

 		# Return if it is not a skill delete item

 		if item.ITEM_TYPE_PET != itemType or item.PET_SKILL_DEL_BOOK != itemSubType:

-			return			

-

+			return

+			

 		# Initialize skill delete question dialog if it hasn't been yet

 		if not self.questionSkillDelDlg:

 			self.questionSkillDelDlg = uiCommon.QuestionDialog2()

@@ -2162,7 +2135,7 @@
 		

 	def OverInSkillSlot3(self, slotIndex):

 		self.OverInPetSkillSlot(2, slotIndex)

-

+		

 	# Show pet tooltip

 	def OverInPetSkillSlot(self, slot, index):

 		pet_id = player.GetActivePetItemId()

@@ -2210,6 +2183,7 @@
 		

 		# Skill data

 		(skill_count, pet_skill1, pet_skill_level1, pet_skill_cool1, pet_skill2, pet_skill_level2, pet_skill_cool2, pet_skill3, pet_skill_level3, pet_skill_cool3) = player.GetPetSkill(pet_id)

+			

 		attachedSlotType	= mouseModule.mouseController.GetAttachedType()			

 		attachedSlotPos		= mouseModule.mouseController.GetAttachedSlotNumber()

 		attachedItemCount	= mouseModule.mouseController.GetAttachedItemCount()

@@ -2221,22 +2195,21 @@
 		

 		# Return if item is not from inventory

 		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

+			(player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

-			return

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

-			return

-

+			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and app.ENABLE_SPECIAL_INVENTORY_SYSTEM):

+

+			return False

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

+			return

+		

 		# Check if item is item.ITEM_TYPE_PET

 		if item.ITEM_TYPE_PET != itemType:

 			return

-

+		

 		# Return if skill delete item is dragged to an empty slot

 		if item.PET_SKILL_DEL_BOOK == itemSubType:

 			self.__OpenPopupDialog(localeInfo.PET_EMPTY_SKILL_SLOT_USE_ITEM)

@@ -2514,6 +2487,7 @@
 		

 		# Skill data

 		(skill_count, pet_skill1, pet_skill_level1, pet_skill_cool1, pet_skill2, pet_skill_level2, pet_skill_cool2, pet_skill3, pet_skill_level3, pet_skill_cool3) = player.GetPetSkill(pet_id)

+		

 		if skill_count:

 			for value in range(skill_count):

 				self.skillSlot[value].SetAlwaysRenderCoverButton(0, False)

@@ -2590,7 +2564,6 @@
 			elif skill.PET_SKILL_USE_TYPE_PASSIVE == pet_skill_use_type:	

 				if self.AffectShower:

 					self.AffectShower.SetPetSkillAffect(3, pet_skill3)		

-					

 

 		self.wndPetMiniInfo.Show()	

 		

@@ -2606,7 +2579,7 @@
 		self.GetChild("HpValue").SetText("")

 		self.SetExperience(0, 0, 0, 0)

 		self.SetLifeTime(100, 100)

-		self.__ClearPetSkillSlot()	#ËÅÄ¹Å clear

+		self.__ClearPetSkillSlot()	#½ºÅ³ clear

 		

 		if self.wndPetFeed:

 			if self.wndPetFeed.IsShow():

@@ -2685,6 +2658,7 @@
 		

 		# Skill data

 		(skill_count, pet_skill1, pet_skill_level1, pet_skill_cool1, pet_skill2, pet_skill_level2, pet_skill_cool2, pet_skill3, pet_skill_level3, pet_skill_cool3) = player.GetPetSkill(pet_id)

+		

 		if pet_skill1:

 		

 			(pet_skill_name, pet_skill_desc, pet_skill_use_type , pet_skill_cool_time) = skill.GetPetSkillInfo(pet_skill1)

@@ -2722,6 +2696,8 @@
 				

 			elif skill.PET_SKILL_USE_TYPE_PASSIVE == pet_skill_use_type:

 				self.AffectShower.SetPetSkillAffect(3, pet_skill3)

+				

+				

 	

 	def PetEvolFlashEventCheck(self, pet_level, evol_level, birthday, curEXP, nextEXP, itemEXP, itemMaxEXP):

 		# Return if pet has reached peak evolution

@@ -2841,27 +2817,31 @@
 		if output_max_exp:

 			expPercent = float(output_cur_exp) / float(output_max_exp) * 100

 		

-		## TEXT output is based on hunting experience + item experience.

+		# If WJ_MULTI_TEXTLINE is active, experience points will be

+		# shown seperately based on type.

 		if app.WJ_MULTI_TEXTLINE:

+			

 			if localeInfo.IsARABIC():

 				tooltip_text = str(curPoint)				+ ' :'	+ str(localeInfo.PET_INFO_EXP)			+ '\\n'	\

 							 + str(maxPoint - curPoint)		+ ' :'	+ str(localeInfo.PET_INFO_NEXT_EXP)		+ '\\n'	\

 							 + str(itemExp)					+ ' :'	+ str(localeInfo.PET_INFO_ITEM_EXP)		+ '\\n'	\

-							 + str(itemExpMax - itemExp)	+ ' :'	+ str(localeInfo.PET_INFO_NEXT_ITEM_EXP)

+							 + str(itemExpMax - itemExp)	+ ' :'	+ str(localeInfo.PET_INFO_NEXT_ITEM_EXP)	

 				self.tooltipEXP.SetText(tooltip_text)

 			else:

 				tooltip_text = str(localeInfo.PET_INFO_EXP) + ': '+ str(curPoint) + '\\n'	\

 							 + str(localeInfo.PET_INFO_NEXT_EXP) + ': ' + str(maxPoint - curPoint) + '\\n'	\

 							 + str(localeInfo.PET_INFO_ITEM_EXP) + ': '+ str(itemExp) + '\\n'	\

 							 + str(localeInfo.PET_INFO_NEXT_ITEM_EXP) + ': ' + str(itemExpMax - itemExp)

+							 

 				self.tooltipEXP.SetText(tooltip_text)

 		else:

-			self.tooltipEXP.SetText("%s : %.2f%%" % (localeInfo.TASKBAR_EXP, float(output_cur_exp) / max(1, float(output_max_exp - output_cur_exp)) * 100))

+			self.tooltipEXP.SetText("%s : %.2f%%" % (localeInfo.TASKBAR_EXP, expPercent))

+			

 		

 	def SetLifeTime(self, curPoint, maxPoint):

 		curPoint = min(curPoint, maxPoint)

 		if maxPoint > 0:

-			self.lifeTimeGauge.SetPercentage(curPoint, maxPoint)

+			self.lifeTimeGauge.SetPercentageWithScale(curPoint, maxPoint)

 			

 	def SetItemToolTip(self, tooltipItem):

 		self.tooltipItem = tooltipItem

@@ -2974,7 +2954,7 @@
 				return False

 			

 		return True

-	

+		

 	def PetInfoBindAffectShower(self, affect_shower):

 		self.AffectShower = affect_shower

 		

@@ -3049,28 +3029,23 @@
 		itemSubType = item.GetItemSubType()			

 

 		# Return if item is beging attached from not inventory window

-		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

+		if player.SLOT_TYPE_INVENTORY != attachedSlotType:

 			return False

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

 			return False

 

 		if slotIndex == player.PET_WND_SLOT_ATTR_CHANGE:

-

+		

 			# Return if upbringing item is already in place

 			if -1 != self.attrChangeIndex[player.PET_WND_SLOT_ATTR_CHANGE]:

 				return False

+			

 

 			if item.ITEM_TYPE_PET != itemType or itemSubType != item.PET_UPBRINGING:

 				return False

-

+				

 			# Return if there is an active pet

 			activePetId = player.GetActivePetItemId()

 			if activePetId != 0:

@@ -3083,6 +3058,7 @@
 				if attrChangePos != -1:

 					self.attrChangeIndex[player.PET_WND_SLOT_ATTR_CHANGE_ITEM] = attrChangePos

 					self.attrChangeSlot.SetItemSlot(player.PET_WND_SLOT_ATTR_CHANGE_ITEM, player.PET_ATTR_CHANGE_ITEM)

+					#self.attrChangeButton.Show()

 				

 		elif slotIndex == player.PET_WND_SLOT_ATTR_CHANGE_ITEM:

 		

@@ -3138,6 +3114,7 @@
 		

 	def __PetAttrChangeCancel(self):

 		self.questionDialog.Close()

+		

 		

 	def PetAttrChangeResult(self, slotIndex, byType):

 		self.attrChangeButton.Hide()

@@ -3196,7 +3173,7 @@
 			sourcePos = player.GetItemSlotIndex(player.PET_ATTR_DETERMINE_ITEM)

 			if sourcePos != -1:

 				net.SendPetAttrDetermine(sourcePos)

-

+		

 	def PetAttrDetermineResult(self, byType):

 		# Display determine result in a popup dialog

 		text = self.typeInfo[byType]

@@ -3267,6 +3244,7 @@
 						item.SelectItem(itemVnum)

 						

 						(skill_count, pet_skill1, pet_skill_level1, pet_skill_cool1, pet_skill2, pet_skill_level2, pet_skill_cool2, pet_skill3, pet_skill_level3, pet_skill_cool3) = player.GetPetSkill(pet_id)

+

 						(pet_level, evol_level, birthday, pet_nick, pet_hp, pet_def, pet_sp) = player.GetPetItem(pet_id)

 						

 						# Item Title

@@ -3276,23 +3254,6 @@
 						itemDesc = item.GetItemDescription()

 						self.tooltipItem.AppendDescription(itemDesc, 26)

 						

-						## Pet Type

-						PET_TYPES = [

-							0,

-							localeInfo.PET_ATTR_DETERMINE_TYPE1_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE2_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE3_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE4_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE5_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE6_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE7_TOOLTIP,

-							localeInfo.PET_ATTR_DETERMINE_TYPE8_TOOLTIP,

-						]

-						

-						pet_type = metinSlot[3]

-						self.tooltipItem.AppendSpace(5)

-						self.tooltipItem.AppendTextLine(PET_TYPES[pet_type], self.tooltipItem.SPECIAL_POSITIVE_COLOR2)

-						

 						# Pet Level/Age

 						self.tooltipItem.AppendSpace(5)

 						birthSec = max(0, metinSlot[0] - birthday)

@@ -3309,7 +3270,8 @@
 						self.tooltipItem.AppendSpace(5)

 						self.tooltipItem.AppendTextLine(localeInfo.PET_TOOLTIP_HP + " +" + str("%0.1f" % pet_hp) + "%", self.tooltipItem.SPECIAL_POSITIVE_COLOR)

 						self.tooltipItem.AppendTextLine(localeInfo.PET_TOOLTIP_DEF + " +" + str("%0.1f" % pet_def) + "%", self.tooltipItem.SPECIAL_POSITIVE_COLOR)

-						self.tooltipItem.AppendTextLine(localeInfo.PET_TOOLTIP_SP + " +" + str("%0.1f" % pet_sp) + "%", self.tooltipItem.SPECIAL_POSITIVE_COLOR)	

+						self.tooltipItem.AppendTextLine(localeInfo.PET_TOOLTIP_SP + " +" + str("%0.1f" % pet_sp) + "%", self.tooltipItem.SPECIAL_POSITIVE_COLOR)				

+

 						# Pet Skills

 						if pet_skill1:

 							self.tooltipItem.AppendSpace(5)

@@ -3323,6 +3285,7 @@
 							self.tooltipItem.AppendSpace(5)

 							(pet_skill_name, pet_skill_desc, pet_skill_use_type , pet_skill_cool_time) = skill.GetPetSkillInfo(pet_skill3)

 							self.tooltipItem.AppendTextLine(localeInfo.PET_TOOLTUP_SKILL % (pet_skill_name, pet_skill_level3) , self.tooltipItem.SPECIAL_POSITIVE_COLOR)

+

 						# Pet Lifetime

 						for i in xrange(item.LIMIT_MAX_NUM):

 							(limitType, limitValue) = item.GetLimit(i)

@@ -3391,27 +3354,26 @@
 

 		# Return if item is beging attached from not inventory window

 		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

+			(player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

+			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and app.ENABLE_SPECIAL_INVENTORY_SYSTEM):

+

 			return False

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

 			return False

-

+			

 		curTime = app.GetGlobalTimeStamp()

 		metinSlot = [player.GetItemMetinSocket(attachedSlotPos, i) for i in xrange(player.METIN_SOCKET_MAX_NUM)]

-

+		

 		# Return if there is an active pet or target pet is still alive

 		if item.ITEM_TYPE_PET == itemType and itemSubType == item.PET_UPBRINGING:

 			activePetId = player.GetActivePetItemId()

 			if activePetId != 0:

 				return False

-

+				

 			if metinSlot[0] > curTime:

 				return False

 		else:

@@ -3464,37 +3426,36 @@
 		

 		# Return if item is beging attached from not inventory window

 		if player.SLOT_TYPE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

+			(player.SLOT_TYPE_SKILL_BOOK_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_UPGRADE_ITEMS_INVENTORY != attachedSlotType and\

 			player.SLOT_TYPE_STONE_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_SWITCH_INVENTORY != attachedSlotType and\

-			player.SLOT_TYPE_COSTUME_INVENTORY != attachedSlotType:

+			player.SLOT_TYPE_GIFT_BOX_INVENTORY != attachedSlotType and app.ENABLE_SPECIAL_INVENTORY_SYSTEM):

+

 			return False

-

-		# Return if item position is bigger than player.INVENTORY_SLOT_COUNT

-		if attachedSlotPos >= player.INVENTORY_SLOT_COUNT: 

+			

+		# Return if item position is bigger than player.ITEM_SLOT_COUNT

+		if attachedSlotPos >= player.ITEM_SLOT_COUNT: 

 			return False

-

+		

 		# Return if there is no to-be-revived pet in slot

 		if self.petReviveIndex == -1:

 			return False

-

+			

 		# Return if material is not item.PET_PRIMIUM_FEEDSTUFF

-		if itemType != item.ITEM_TYPE_PET or itemSubType != item.PET_PRIMIUM_FEEDSTUFF:

+		if itemType != item.ITEM_TYPE_PET and itemSubType != item.PET_PRIMIUM_FEEDSTUFF:

 			return False

-

+			

 		# Return if the slot is already occupied or item is in another slot

 		if self.petReviveItems[slotIndex] != -1:

 			return False

-

+			

 		if attachedSlotPos in self.petReviveItems:

 			return False

-

+			

 		# Return if enough material has been appended

 		if self.HasEnoughPetReviveMaterial():

 			return False

-

+	

 		self.petReviveItems[slotIndex] = attachedSlotPos

 		self.petReviveItemsCount[slotIndex] = attachedItemCount

 		self.petReviveMaterialSlot.SetItemSlot(slotIndex, attachedItemVNum, attachedItemCount)

@@ -3640,11 +3601,11 @@
 			self.__ClearPetReviveWindow()

 			

 			

-	def ItemMovePremiumFeedWindow(self, slotWindow, attachSlotType, slotIndex):

-		#if player.INVENTORY == slotWindow:

-		#	attachSlotType = player.SLOT_TYPE_INVENTORY

-		#else:

-		#	return False

+	def ItemMovePremiumFeedWindow(self, slotWindow, slotIndex):

+		if player.INVENTORY == slotWindow:

+			attachSlotType = player.SLOT_TYPE_INVENTORY

+		else:

+			return False

 	

 		mouseModule.mouseController.DeattachObject()

 		

@@ -3667,11 +3628,11 @@
 		

 		return False

 	

-	def AttachItemToPetWindow(self, windowType, slotType, slotIndex):

+	def AttachItemToPetWindow(self, windowType, slotIndex):

 		if self.IsShow():

 			if self.GetState() == player.PET_WINDOW_INFO and self.feedIndex != player.FEED_BUTTON_MAX:

 				if not self.CantFeedItem(slotIndex):

-					if self.wndPetFeed.ItemMoveFeedWindow(windowType, slotType, slotIndex):

+					if self.wndPetFeed.ItemMoveFeedWindow(windowType, slotIndex):

 						return True

 					

 			elif self.GetState() == player.PET_WINDOW_ATTR_CHANGE:

@@ -3679,7 +3640,7 @@
 					return True

 				

 			elif  self.GetState() == player.PET_WINDOW_PRIMIUM_FEEDSTUFF:

-				if self.ItemMovePremiumFeedWindow(windowType, slotType, slotIndex):

+				if self.ItemMovePremiumFeedWindow(windowType, slotIndex):

 					return True

 

 		return False

@@ -3688,7 +3649,7 @@
 	def __init__(self):

 		ui.Window.__init__(self, "TOP_MOST")

 

-		textLine = ui.TextLine()

+		textLine = ui.TextLinePet()

 		textLine.SetParent(self)

 		textLine.SetHorizontalAlignCenter()

 		textLine.SetOutline()


--- client/client/pack/root/uiscriptlocale.py
+++ client/client/pack/root/uiscriptlocale.py
@@ -104,7 +104,7 @@
 			global SNOWFLAKE_STICK_EVENT_DESC_FILE

 			SNOWFLAKE_STICK_EVENT_DESC_FILE = "%s/snowflake_stick_event_desc.txt" % (name)

 

-		if app.ENABLE_GROWTH_PET_SYSTEM:

+	if app.ENABLE_GROWTH_PET_SYSTEM:

 			PET_PRIMIUM_FEEDSTUFF_DESC = "%s/pet_primium_feedstuff_desc.txt" % (name)

 

 		LoadLocaleFile(LOCALE_INTERFACE_FILE_NAME)


--- client/client/pack/root/uitaskbar.py
+++ client/client/pack/root/uitaskbar.py
@@ -1065,7 +1065,7 @@
 							else:

 								slot.DeactivateSlot(slotNumber)

 

-					if app.ENABLE_GROWTH_PET_SYSTEM:

+	if app.ENABLE_GROWTH_PET_SYSTEM:

 						if constInfo.IS_PET_ITEM(itemIndex):

 							self.__SetCoolTimePetItemSlot(slot, Position, slotNumber, itemIndex)

 							

@@ -1121,7 +1121,7 @@
 			slot.RefreshSlot()

 			startNumber += 4

 

-	if app.ENABLE_GROWTH_PET_SYSTEM:

+		if app.ENABLE_GROWTH_PET_SYSTEM:

 		def __SetCoolTimePetItemSlot(self, slot, Position, slotNumber, itemVnum):

 

 			item.SelectItem(itemVnum)
